<!DOCTYPE html>
<!-- saved from url=(0052)https://qiita.com/hitotch/items/36dcc678976bd4ebe006 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no" name="viewport"><meta content="#55c500" name="theme-color"><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification"><link href="https://qiita.com/manifest.json" rel="manifest"><link href="https://qiita.com/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml"><meta name="csrf-param" content="authenticity_token">
<meta name="csrf-token" content="iC2S+/HgrROQJ5HUkPdKi0wfiFarA3/LKm+RABfY4A2qFJkAVGY342BodrbOfR3NlzSX9jxLo5uop2k8HnGc+A=="><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico"><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png"><link rel="stylesheet" media="all" href="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/style-4713c8ccc408ced72d64f84a31e9250a.min.css"><script type="text/javascript" async="" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/f.txt"></script><script type="text/javascript" async="" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/f.txt"></script><script type="text/javascript" async="" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/f.txt"></script><script type="text/javascript" async="" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/f.txt"></script><script type="text/javascript" async="" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/f.txt"></script><script async="" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/gtm.js.download"></script><script type="text/javascript" async="" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/analytics.js.download"></script><script type="text/javascript" async="" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/analytics.js.download"></script><script type="text/javascript" async="" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/js"></script><script type="text/javascript" async="" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/js(1)"></script><script type="text/javascript" async="" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/f.txt"></script><script src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/1792588824374455" async=""></script><script async="" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/fbevents.js.download"></script><script async="" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/ff9a3577423c8ed5_4330.js.download"></script><script type="text/javascript" async="" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/td.min.js.download"></script><script src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/v3-article-bundle-6075b6fbc104be4bd72e50d6d09725a7.min.js.download" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site"><meta property="og:type" content="article"><meta property="og:title" content="React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-1.2.2&amp;w=1200&amp;mark=https%3A%2F%2Fqiita-user-contents.imgix.net%2F~text%3Fixlib%3Drb-1.2.2%26w%3D840%26h%3D380%26txt%3DReact%2520Native%2520%252B%2520Expo%2520%252B%2520unstated%2520%2528%252B%2520react-navigation%2529%25E3%2581%25A7%25E3%2580%2581%25E7%25B0%25A1%25E5%258D%2598%25E3%2582%25B0%25E3%2583%25AD%25E3%2583%25BC%25E3%2583%2590%25E3%2583%25ABState%25E7%25AE%25A1%25E7%2590%2586%25EF%25BC%258B%25E3%2583%25AD%25E3%2583%25BC%25E3%2582%25AB%25E3%2583%25AB%25E3%2583%2587%25E3%2583%25BC%25E3%2582%25BF%25E7%25AE%25A1%25E7%2590%2586%25E3%2582%2592%25E5%25AE%259F%25E7%258F%25BE%25E3%2581%2599%25E3%2582%258B%26txt-color%3D%2523333%26txt-font%3DAvenir-Black%26txt-size%3D54%26txt-clip%3Dellipsis%26txt-align%3Dcenter%252Cmiddle%26s%3D22ae1d6affe640c94f2113d8120aa1d2&amp;mark-align=center%2Cmiddle&amp;blend=https%3A%2F%2Fqiita-user-contents.imgix.net%2F~text%3Fixlib%3Drb-1.2.2%26w%3D840%26h%3D500%26txt%3D%2540hitotch%26txt-color%3D%2523333%26txt-font%3DAvenir-Black%26txt-size%3D45%26txt-align%3Dright%252Cbottom%26s%3D07742dc7ad1dec49ac1a345c9749c4cd&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=c03abedb51e350e778973a56a76c6950"><meta property="og:description" content="この記事は、「【連載】初めてのReact Native + Expo開発環境構築入門」の子記事です。環境などの条件は、親記事をご覧ください。



　前回までに、動作の基本となる画面遷移までできたので、次はInvoice(請求書)を格..."><meta content="https://qiita.com/hitotch/items/36dcc678976bd4ebe006" property="og:url"><meta content="Qiita" property="og:site_name"><meta content="564524038" property="fb:admins"><meta content="JavaScript,React,reactnative,react-native,expo" name="keywords"><style data-styled="active" data-styled-version="5.0.1"></style><script>window.frtn=window.frtn||function(){ (frtn.q=frtn.q||[]).push(arguments) };
frtn("init",{
service_id:"cova_248",
site_id:"site_134",
tag_id:"tag_283"
});
frtn("send","pageview");</script><script defer="" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/insight.js.download" type="text/javascript"></script><script>!function(t,e){if(void 0===e[t]){e[t]=function(){e[t].clients.push(this),this._init=[Array.prototype.slice.call(arguments)]},e[t].clients=[];for(var r=function(t){return function(){return this["_"+t]=this["_"+t]||[],this["_"+t].push(Array.prototype.slice.call(arguments)),this}},s=["blockEvents","unblockEvents","setSignedMode","setAnonymousMode","resetUUID","addRecord","fetchGlobalID","set","trackEvent","trackPageview","trackClicks","ready"],n=0;n<s.length;n++){var c=s[n];e[t].prototype[c]=r(c)}var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=("https:"===document.location.protocol?"https:":"http:")+"//cdn.treasuredata.com/sdk/2.1/td.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)}}("Treasure",this);

// Configure an instance for your database
var td = new Treasure({
  host: 'in.treasuredata.com',
  writeKey: '10614/f5a4453704ad12facc47fe5281fd57526a6119e9',
  database: 'qiita_public',
  startInSignedMode: true
});

// Enable cross-domain tracking
td.set('$global', 'td_global_id', 'td_global_id');
// Track pageview information to 'pageviews' table
td.set('pageviews_all', {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"hitotch","type":"items","id":"36dcc678976bd4ebe006"},"user_id":559163})
td.trackPageview('pageviews_all');</script><script src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/js(2)"></script><style data-jss="" data-meta="MuiTooltip">
.MuiTooltip-popper {
  flip: false;
  z-index: 1500;
  pointer-events: none;
}
.MuiTooltip-popperInteractive {
  pointer-events: auto;
}
.MuiTooltip-popperArrow[x-placement*="bottom"] .MuiTooltip-arrow {
  top: 0;
  flip: false;
  left: 0;
  width: 2em;
  height: 1em;
  margin-top: -0.95em;
  margin-left: 4px;
  margin-right: 4px;
}
.MuiTooltip-popperArrow[x-placement*="top"] .MuiTooltip-arrow {
  flip: false;
  left: 0;
  width: 2em;
  bottom: 0;
  height: 1em;
  margin-left: 4px;
  margin-right: 4px;
  margin-bottom: -0.95em;
}
.MuiTooltip-popperArrow[x-placement*="right"] .MuiTooltip-arrow {
  flip: false;
  left: 0;
  width: 1em;
  height: 2em;
  margin-top: 4px;
  margin-left: -0.95em;
  margin-bottom: 4px;
}
.MuiTooltip-popperArrow[x-placement*="left"] .MuiTooltip-arrow {
  flip: false;
  right: 0;
  width: 1em;
  height: 2em;
  margin-top: 4px;
  margin-right: -0.95em;
  margin-bottom: 4px;
}
.MuiTooltip-popperArrow[x-placement*="left"] .MuiTooltip-arrow::before {
  flip: false;
  border-color: transparent transparent transparent currentcolor;
  border-width: 1em 0 1em 1em;
}
.MuiTooltip-popperArrow[x-placement*="right"] .MuiTooltip-arrow::before {
  flip: false;
  border-color: transparent currentcolor transparent transparent;
  border-width: 1em 1em 1em 0;
}
.MuiTooltip-popperArrow[x-placement*="top"] .MuiTooltip-arrow::before {
  flip: false;
  border-color: currentcolor transparent transparent transparent;
  border-width: 1em 1em 0 1em;
}
.MuiTooltip-popperArrow[x-placement*="bottom"] .MuiTooltip-arrow::before {
  flip: false;
  border-color: transparent transparent currentcolor transparent;
  border-width: 0 1em 1em 1em;
}
.MuiTooltip-tooltip {
  color: #fff;
  padding: 4px 8px;
  font-size: 0.625rem;
  max-width: 300px;
  word-wrap: break-word;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 500;
  line-height: 1.4em;
  border-radius: 4px;
  background-color: rgba(97, 97, 97, 0.9);
}
.MuiTooltip-tooltipArrow {
  margin: 0;
  position: relative;
}
.MuiTooltip-arrow {
  color: rgba(97, 97, 97, 0.9);
  position: absolute;
  font-size: 6px;
}
.MuiTooltip-arrow::before {
  width: 0;
  height: 0;
  margin: auto;
  content: "";
  display: block;
  border-style: solid;
}
.MuiTooltip-touch {
  padding: 8px 16px;
  font-size: 0.875rem;
  font-weight: 400;
  line-height: 1.14286em;
}
.MuiTooltip-tooltipPlacementLeft {
  margin: 0 24px ;
  transform-origin: right center;
}
@media (min-width:600px) {
  .MuiTooltip-tooltipPlacementLeft {
    margin: 0 14px;
  }
}
.MuiTooltip-tooltipPlacementRight {
  margin: 0 24px;
  transform-origin: left center;
}
@media (min-width:600px) {
  .MuiTooltip-tooltipPlacementRight {
    margin: 0 14px;
  }
}
.MuiTooltip-tooltipPlacementTop {
  margin: 24px 0;
  transform-origin: center bottom;
}
@media (min-width:600px) {
  .MuiTooltip-tooltipPlacementTop {
    margin: 14px 0;
  }
}
.MuiTooltip-tooltipPlacementBottom {
  margin: 24px 0;
  transform-origin: center top;
}
@media (min-width:600px) {
  .MuiTooltip-tooltipPlacementBottom {
    margin: 14px 0;
  }
}
</style><script type="text/x-mathjax-config">MathJax.Hub.Config({
    skipStartupTypeset: true,
    showProcessingMessages: false,
    tex2jax: {
      inlineMath: [['$', '$']],
      displayMath: [['$$', '$$']],
      processEscapes: true,
      processEnvironments: false,
      processRefs: false,
      skipTags: ['script','noscript','style','textarea','pre','code','a','h1','h2','h3','h4','h5','h6']
    }
   })</script><script src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/gpt.js.download"></script><script src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/pubads_impl_2020071601.js.download" async=""></script><script src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/f(1).txt"></script><script src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/f(2).txt"></script><script src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/f(3).txt"></script><script src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/f(4).txt"></script><script src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/f(5).txt"></script><script src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/f(6).txt"></script></head><body class="vsc-initialized"><div class="allWrapper"><div class="st-HeaderContainer"><div id="GlobalHeader-react-component-4ef65f2e-b630-42df-ae63-2e07cd5412bc"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="https://qiita.com/" class="st-Header_logo mr-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div><div class="st-Header_realmSelector" tabindex="0"><span class="fa fa-fw fa-caret-down"></span></div><div class="st-Header_dropdown st-RealmSelector"><div class="st-RealmSelector_realms"><a class="st-Header_dropdownItem st-RealmItem" href="https://qiita.com/"><div class="st-RealmItem_statusIcon"><span class="fa fa-fw fa-check"></span></div><div class="st-RealmItem_humanName">Qiita</div></a></div><hr><div class="st-RealmSelector_supplements"><div class="st-RealmSelector_label">ログイン中のチームがありません</div><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem st-RealmSelectorSupplement"><div class="st-RealmSelectorSupplement_icon"><span class="fa fa-fw fa-sign-in"></span></div><div>Qiita Team にログイン...</div></a></div></div></div><div><div class="st-Header_community" tabindex="0">コミュニティ<span class="fa fa-fw fa-caret-down ml-1of2"></span></div><div class="st-Header_dropdown"><a href="https://qiita.com/users" class="st-Header_dropdownItem"><span class="fa fa-fw fa-users mr-1of2"></span>ユーザー一覧</a><a href="https://qiita.com/organizations" class="st-Header_dropdownItem"><span class="fa fa-fw fa-building-o mr-1of2"></span>Organization一覧</a><a href="https://qiita.com/advent-calendar" class="st-Header_dropdownItem"><span class="fa fa-fw fa-calendar mr-1of2"></span>アドベントカレンダー</a><div class="st-Header_dropdownSeparator"></div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank"><span class="fa fa-fw fa-search mr-1of2"></span>Qiita Jobs</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank"><span class="fa fa-fw fa-comments-o mr-1of2"></span>Qiitadon (β)</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank"><span class="fa fa-fw fa-newspaper-o mr-1of2"></span>Qiita Zine</a><div class="st-Header_dropdownSeparator"></div><a href="https://help.qiita.com/ja/articles/qiita-community-guideline" class="st-Header_dropdownItem" target="_blank"><span class="fa fa-fw fa-book mr-1of2"></span>コミュニティガイドライン</a><a href="https://help.qiita.com/ja/articles/qiita-article-guideline" class="st-Header_dropdownItem" target="_blank"><span class="fa fa-fw fa-book mr-1of2"></span>良い記事を書くために</a><a href="https://qiita.com/release-notes" class="st-Header_dropdownItem" target="_blank"><span class="fa fa-fw fa-book mr-1of2"></span>リリースノート</a></div></div><form class="st-Header_search" action="https://qiita.com/search" method="get"><span class="fa fa-search"></span><input type="search" class="st-Header_searchInput" autocomplete="off" placeholder="キーワードを入力" value="" name="q" required=""></form><div class="st-Header_searchButton"><span class="fa fa-search"></span></div></div><div class="st-Header_end"><a href="https://qiita.com/stock" class="st-Header_stock mr-2 py-2"><span class="st-Header_stock-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 359.16 339" color="#fff" style="fill:#fff;width:13px;height:14.3px;display:inline-block;vertical-align:bottom"><path d="M359.16 251.41V0H0v251.41c91.24 116.79 267.92 116.79 359.16 0zm-53.22-131.26L187.73 253a23 23 0 01-16.23 7.69h-.94a23 23 0 01-15.87-6.35L54.53 158.86a23 23 0 0131.73-33.27l82.94 79.11L271.59 89.6a23 23 0 1134.35 30.55z"></path></svg></span><span class="st-Header_stock-label">ストック一覧</span></a><div><div class="st-Header_postButton mr-2 px-2" tabindex="0"><span class="fa fa-fw fa-pencil-square-o mr-1"></span>投稿する<span class="fa fa-fw fa-caret-down ml-1of2"></span></div><div class="st-Header_dropdown"><a href="https://qiita.com/drafts/new" class="st-Header_dropdownItem">記事</a><a href="https://qiita.com/questions/new" class="st-Header_dropdownItem">質問</a></div></div><div class="u-relative"><div class="st-Header_notifications" tabindex="0">0</div><div class="st-Header_notiIframe"><div class="st-Header_notiHeader"><div><span class="fa fa-bell-o mgr-1"></span>お知らせ</div><a href="https://qiita.com/settings/notifications">通知設定</a></div><div class="st-Header_notiFooter"><a href="https://qiita.com/notifications">通知一覧を見る</a></div></div></div><div class="u-relative"><div class="st-Header_loginUser" tabindex="0"><img src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/https___avatars3.githubusercontent.com_u_55423883_v=4" alt="YUMA-NAGAO"><span class="fa fa-fw fa-caret-down ml-1"></span></div><div class="st-Header_dropdown"><a href="https://qiita.com/YUMA-NAGAO" class="st-Header_dropdownItem">マイページ</a><div class="st-Header_dropdownSeparator"></div><a href="https://qiita.com/drafts" class="st-Header_dropdownItem">下書き一覧</a><a href="https://qiita.com/YUMA-NAGAO/private" class="st-Header_dropdownItem">限定共有記事一覧</a><a href="https://qiita.com/patches" class="st-Header_dropdownItem">編集リクエスト一覧</a><div class="st-Header_dropdownSeparator"></div><a href="https://qiita.com/settings" class="st-Header_dropdownItem">設定</a><a href="https://help.qiita.com/ja/categories/qiita/" class="st-Header_dropdownItem" target="_blank">ヘルプ</a><div class="st-Header_dropdownSeparator"></div><div class="st-Header_dropdownItem" tabindex="0">ログアウト</div></div></div></div><div class="st-Header_overlay"></div><form class="st-Header_searchModal" action="https://qiita.com/search" method="get"><input type="text" class="st-Header_searchModalInput" autocomplete="off" placeholder="キーワードを入力" value="" name="q" required=""></form></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-4ef65f2e-b630-42df-ae63-2e07cd5412bc">{"unreadNotificationsCount":0,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":{"profileImageUrl":"https://avatars3.githubusercontent.com/u/55423883?v=4","urlName":"YUMA-NAGAO"},"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":false,"currentUser":{"isStaff":false,"isJobseeker":false,"isBetaReleaseEnabled":false,"isEarlyAdapter":false,"name":"","originalId":559163,"profileImageUrl":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Favatars3.githubusercontent.com%2Fu%2F55423883%3Fv%3D4?ixlib=rb-1.2.2\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=9a27f9a0f42b0037c362c3058e093823","urlName":"YUMA-NAGAO"}}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/%23%3CQiita::Graph::Result:0x000000000fcf02b0%3E","name":"JavaScript"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2019-09-06T08:50:25.000+09:00","dateModified":"2019-09-06T08:50:25.000+09:00","headline":"React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-1.2.2\u0026w=1200\u0026mark=https%3A%2F%2Fqiita-user-contents.imgix.net%2F~text%3Fixlib%3Drb-1.2.2%26w%3D840%26h%3D380%26txt%3DReact%2520Native%2520%252B%2520Expo%2520%252B%2520unstated%2520%2528%252B%2520react-navigation%2529%25E3%2581%25A7%25E3%2580%2581%25E7%25B0%25A1%25E5%258D%2598%25E3%2582%25B0%25E3%2583%25AD%25E3%2583%25BC%25E3%2583%2590%25E3%2583%25ABState%25E7%25AE%25A1%25E7%2590%2586%25EF%25BC%258B%25E3%2583%25AD%25E3%2583%25BC%25E3%2582%25AB%25E3%2583%25AB%25E3%2583%2587%25E3%2583%25BC%25E3%2582%25BF%25E7%25AE%25A1%25E7%2590%2586%25E3%2582%2592%25E5%25AE%259F%25E7%258F%25BE%25E3%2581%2599%25E3%2582%258B%26txt-color%3D%2523333%26txt-font%3DAvenir-Black%26txt-size%3D54%26txt-clip%3Dellipsis%26txt-align%3Dcenter%252Cmiddle%26s%3D22ae1d6affe640c94f2113d8120aa1d2\u0026mark-align=center%2Cmiddle\u0026blend=https%3A%2F%2Fqiita-user-contents.imgix.net%2F~text%3Fixlib%3Drb-1.2.2%26w%3D840%26h%3D500%26txt%3D%2540hitotch%26txt-color%3D%2523333%26txt-font%3DAvenir-Black%26txt-size%3D45%26txt-align%3Dright%252Cbottom%26s%3D07742dc7ad1dec49ac1a345c9749c4cd\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=c03abedb51e350e778973a56a76c6950","mainEntityOfPage":"https://qiita.com/hitotch/items/36dcc678976bd4ebe006","author":{"@type":"Person","address":"ニューヨーク","email":"hitomi@mirai-it.com","identifier":"hitotch","name":"hitotch","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Favatars2.githubusercontent.com%2Fu%2F12057602%3Fv%3D4?ixlib=rb-1.2.2\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=2efb61618a8bab47536cd96a88c93f92","url":"https://qiita.com/hitotch","description":"お仕事や協力開発、越境相談など大歓迎。\r\n松下電器産業株式会社（現パナソニック）でレッツノートを設計、ホイールパッドなどを発明。2007年ニューヨークにて独立し、主に在米日系企業のシステム開発を請け負うかたわら、暇を見つけては新技術に触れてニタニタしています。","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-green-36e6153054916b1d8ed7fc47163039da.png"}}}</script><script>td.trackEvent('pageviews_article',{
    user_id: "559163",
    article_id: "1012566",
    article_uuid: "36dcc678976bd4ebe006",
    td_description: "&quot;この記事は、「[【連載】初めてのReact Native + Expo開発環境構築入門](https://qiita.com/hitotch/items/5142fff638c7805d84d5)」の子記事です。環境などの条件は、親記事をご覧ください。\n\n---\n\n　[前回](https://qiita.com/hitotch/items/79533682670d4ecd2355)までに、動作の基本となる画面遷移までできたので、次はInvoice(請求書)を格納しておく場所を作って、そのデータを表示できるようにしましょう。\n　簡単にやろうと思えば、unstatedを入れてデータを適当に登録すれば動くのですが、実務を考えてある程度お行儀よくコーディングすることにします。したがって、unstatedの話としては少々遠回りになりますが、ご容赦を。\n\n# unstated。Reduxではなく。\n\n　ReactのグローバルState管理には、私はこれまでReduxを使っていました。C#やPHPで多くのAPIを準備して、それらと連携して動作するような複雑なワンページアプリケーションであればRedux+ThunkでOKです。しかし、やりたいことに対して記述量が多いことと、記述場所がActionやらReducerやらばらばらで見通しが悪いことが欠点で、小さなアプリではオーバースペックに思えます。\n　そこで登場するのがunstatedです。ちょっと癖はあるものの、コード量は少ないし、なれれば楽勝になります。API通信のためのaxiosとの相性もばっちりです。\n\n# ネットがつながらないことを想定\n\n　実務でモバイルアプリ（Webアプリではなく）を作りたい理由の一つに、電波の届かないところでも止まらずに動いて、電波のあるところでデータの送受信をしたい、という要件があります。客先で請求書を作って印刷したいときに、その場所が地下でネットが使えないし、もちろんお客さんのWi-Fiをいちいち借りて接続なんてできない、といったことはよくある話です。\n　今回のように、請求書発行などの小さな目的のアプリであれば、メモリ上に配列オブジェクトなどで請求書情報を持っておいて、ネットがつながったら同期ボタンでサーバーと同期するという単純な動作で十分実用に耐えます。\n\n　そこで今回は、請求書オブジェクト``Invoice``、請求書行オブジェクト``Item``、顧客オブジェクト``Customer``、商品オブジェクト``Product``を作成し、それをグローバルStateに格納して取り扱うことにします。\n\n# データModelの作成\n\n　まず、グローバルstateに格納するデータの構造を整えておきます。\n　今回のアプリでは、以下のようなイメージでグローバルStateにデータを保持するようにします。\n\n```\n{\n    invoices: [\n        [0]: {\n            id: 0,\n            customer: 15,\n            date: \u0026amp;quot;2019/1/1\u0026amp;quot;,\n            items: [\n                [0]: {product: 2, qty: 2, ...},\n                [1]: {product: 5, qty: 1, ...},\n                [2]: {product: 8, qty: 5, ...},\n            ],\n            ...\n        },\n        ...\n    ],\n    products: [\n        [0]: {\n            id: 0,\n            name: \u0026amp;quot;Red X t-shirt\u0026amp;quot;,\n            price: 10.5,\n            ...\n        },\n        ...\n    ],\n    customers: [\n        [0]: {\n            id: 0,\n            name: \u0026amp;quot;ABCDEFG corp.\u0026amp;quot;,\n            addr1: \u0026amp;quot;123 West Street\u0026amp;quot;,\n            ...\n        },\n        ...\n    ],\n}\n```\n\n　このままハッシュ＆配列でデータ構造を表現してもいいのですが、コードの品質を上げるために、データ構造をちゃんとクラス化（Model化）することにします。\n　``Invoice``, ``Item``, ``Customer``, ``Product``のモデルを、以下のようにクラス化して作成します。MVCのModelと同じ考え方です。お行儀よくgetterとsetterを使い、要件に従ってextendしやすい構造にしています。ここではInvoiceにItemを追加したり削除したりするくらいの機能しか作っていません。\n\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/315589/67b14f56-9d1b-ce2a-a22a-45711e213583.png)\n\n```/models/Invoice.js\nexport default class Invoice{\n    constructor(id, date, customer, items) {\n        this._id = id;\n        this._date = date;\n        this._customer = customer;\n        this._items = items;\n    }\n\n    get id(){ return this._id; }\n    set id(newValue){ this._id = newValue; }\n    get date(){ return this._date; }\n    set date(newValue){ this._date = newValue; }\n    get customer(){ return this._customer; }\n    set customer(newValue){ this._customer = newValue; }\n    get items(){ return this._items; }\n    set items(newValue){ this._items = newValue; }\n\n    addItem(item){\n        this._items.push(item);\n    }\n    removeItem(productId){\n        this._items = this._items.filter(item =\u0026amp;gt; item.product != productId);\n    }\n}\n```\n\n```/models/Item.js\nexport default class Item{\n    constructor(product, qty, adjust, credit) {\n        this._product = product;        // Product id\n        this._qty = qty;                // Quantity scheduled\n        this._adjust = adjust;          // Adjustment on site\n        this._credit = credit;          // Returned quantity\n    }\n\n    get product(){ return this._product; }\n    set product(newValue){ this._product = newValue; }\n    get qty(){ return this._qty; }\n    set qty(newValue){ this._qty = newValue; }\n    get adjust(){ return this._adjust; }\n    set adjust(newValue){ this._adjust = newValue; }\n    get credit(){ return this._credit; }\n    set credit(newValue){ this._credit = newValue; }\n}\n```\n\n```/models/Customer.js\nexport default class Customer{\n    constructor(id, name, addr1, addr2, city, state, zip) {\n        this._id = id;\n        this._name = name;\n        this._addr1 = addr1;\n        this._addr2 = addr2;\n        this._city = city;\n        this._state = state;\n        this._zip = zip;\n    }\n\n    get id(){ return this._id; }\n    set id(newValue){ this._id = newValue; }\n    get name(){ return this._name; }\n    set name(newValue){ this._name = newValue; }\n    get addr1(){ return this._addr1; }\n    set addr1(newValue){ this._addr1 = newValue; }\n    get addr2(){ return this._addr2; }\n    set addr2(newValue){ this._addr2 = newValue; }\n    get city(){ return this._city; }\n    set city(newValue){ this._city = newValue; }\n    get state(){ return this._state; }\n    set state(newValue){ this._state = newValue; }\n    get zip(){ return this._zip; }\n    set zip(newValue){ this._zip = newValue; }\n}\n```\n\n```/models/Product.js\nexport default class Product{\n    constructor(id, name, shortName, price, cost) {\n        this._id = id;\n        this._name = name;\n        this._shortName = shortName;\n        this._price = price;\n        this._cost = cost;\n    }\n\n    get id(){ return this._id; }\n    set id(newValue){ this._id = newValue; }\n    get name(){ return this._name; }\n    set name(newValue){ this._name = newValue; }\n    get shortName(){ return this._shortName; }\n    set shortName(newValue){ this._shortName = newValue; }\n    get price(){ return this._price; }\n    set price(newValue){ this._price = newValue; }\n    get cost(){ return this._cost; }\n    set cost(newValue){ this._cost = newValue; }\n}\n```\n\n# Seederの作成\n\n　動作テスト用に、テストデータを発生させるシーダーを準備しておきます。\n\n```/models/seeder/Seeder.js\nimport Customer from \u0026amp;quot;../Customer\u0026amp;quot;;\nimport Invoice from \u0026amp;quot;../Invoice\u0026amp;quot;;\nimport Item from \u0026amp;quot;../Item\u0026amp;quot;;\nimport Product from \u0026amp;quot;../Product\u0026amp;quot;;\n\nexport default class Seeder {\n  static getSeed() {\n    return {\n      customers: [\n        new Customer(0, \u0026amp;quot;ABC Store\u0026amp;quot;, \u0026amp;quot;123 Abc St.\u0026amp;quot;, \u0026amp;quot;\u0026amp;quot;, \u0026amp;quot;New York\u0026amp;quot;, \u0026amp;quot;NY\u0026amp;quot;, \u0026amp;quot;10001\u0026amp;quot;),\n        new Customer(1, \u0026amp;quot;123 Deli\u0026amp;quot;, \u0026amp;quot;1 Def Ave.\u0026amp;quot;, \u0026amp;quot;\u0026amp;quot;, \u0026amp;quot;New York\u0026amp;quot;, \u0026amp;quot;NY\u0026amp;quot;, \u0026amp;quot;10002\u0026amp;quot;),\n        new Customer(2, \u0026amp;quot;Xyz mart\u0026amp;quot;, \u0026amp;quot;23 Xyz Blvd.\u0026amp;quot;, \u0026amp;quot;\u0026amp;quot;, \u0026amp;quot;New York\u0026amp;quot;, \u0026amp;quot;NY\u0026amp;quot;, \u0026amp;quot;10003\u0026amp;quot;)\n      ],\n      products: [\n        new Product(0, \u0026amp;quot;Blue ribbon\u0026amp;quot;, \u0026amp;quot;B.R.\u0026amp;quot;, 10.5, 7.2),\n        new Product(1, \u0026amp;quot;Red ribbon\u0026amp;quot;, \u0026amp;quot;R.R.\u0026amp;quot;, 9.5, 6.0),\n        new Product(3, \u0026amp;quot;White shirt\u0026amp;quot;, \u0026amp;quot;W.S.\u0026amp;quot;, 15.0, 9.3)\n      ],\n      invoices: [\n        new Invoice(0, \u0026amp;quot;1/1/2019\u0026amp;quot;, 0, [new Item(0, 5, 0, 0), new Item(1, 3, 0, 0), new Item(2, 4, 0, 0)]),\n        new Invoice(2, \u0026amp;quot;1/1/2019\u0026amp;quot;, 0, [new Item(0, 7, 0, 0)])\n      ]\n    };\n  }\n}\n```\n\n# unstatedをインストール\n\n　サクッとインストールします。\n\n```\nnpm install unstated\n```\n\n# グローバルStateを作る\n\n　unstatedでグローバルStateを作るには、Provider、Subscribe、Containerの３つを使います。簡単に知るには[この記事](https://qiita.com/kaba/items/b05f680f850dd46548f3)あたりがよろしいかと。\n\n## Providerでアプリ全体を囲む\n\n```jsx:App.js\nimport { Provider } from \u0026amp;quot;unstated\u0026amp;quot;;\n...\nexport default class App extends React.Component {\n  render() {\n    return (\n      \u0026amp;lt;Provider\u0026amp;gt;\n        \u0026amp;lt;AppContainer /\u0026amp;gt;\n      \u0026amp;lt;/Provider\u0026amp;gt;\n    );\n  }\n}\n```\n\n　これでアプリ全体でSubscribeコンポーネントが使えるようになりました。\n\n## Containerを作る\n\n　Containerは、StateやStateに関連する処理の実体クラスです。Containerを1つ作って、アプリ内で使うグローバルStateを作り、そのStateに対する処理内容(メソッド)を追加します。当然、Containerはいろんなコンポーネントから使うことになるので、ファイル化してimportできるようにしておきましょう。containersフォルダを作って、その下にInvoiceContainerという名前のContainerを作ります。\n\n```/containers/InvoiceContainer.js\nimport { Container } from \u0026amp;quot;unstated\u0026amp;quot;;\nimport Seeder from \u0026amp;quot;../models/seeder/Seeder.js\u0026amp;quot;;\n\nexport default class InvoiceContainer extends Container {\n\n  constructor(props = {}) {\n    super();\n    this.state = {\n      data: props.initialSeeding ? Seeder.getSeed() : this.getEmptyData()\n    };\n  }\n\n  seed() {\n    this.setState({ data: Seeder.getSeed() });\n  }\n\n  clear() {\n    this.setState({ data: this.getEmptyData() });\n  }\n\n  getEmptyData() {\n    return {\n      customers: [],\n      products: [],\n      invoices: []\n    };\n  }\n}\n```\n\n　ここでは、``data``という名前のStateだけ登録します。今回はContainerをインスタンス化するときに引数を渡して、シードするかしないか動作を分けることにします。initialSeedingというプロパティとして引数を読んで、trueなら``data``をSeederからとってくる、falseなら``data``を空データにする、とします。このように引数によって初期Stateを変更したい場合は、constructorを使います。\n　初期化が終わった後、各コンポーネントからシードを実行したりデータをクリアできるように、シード動作をseed()として定義し、クリア動作をclear()として定義しています。\n\n　コンストラクタでは``this.state =``のように直接stateを変更していますが、send()やclear()では変更検知をReactが検知できるようにthis.setStateを使っていることに注意してください。\n\n　さて、これでグローバルStateの準備ができましたので、次は利用側のコードを書いていきます。\n\n## Containerのインスタンスを先に作っておく\n\n　これは、初期値指定をしない場合は不要なのです。Containerのインスタンスを先に作っておいて、ProviderにInjectすることによって、SubscribeでContainerを使うときにはすでに「狙ったように」初期化されている状態にできます。そうでなければ、SubscribeでContainerを使うときには「よしなに」初期化される（constructorを使わずに``state = ``で初期化することになるのと、もしインスタンスがまだ作られてなかったらインスタンスを作ってくれる）ことになります。\n\n``` jsx:App.js\nimport InvoiceContainer from \u0026amp;quot;./containers/InvoiceContainer\u0026amp;quot;;\n...\nexport default class App extends React.Component {\n  render() {\n    let globalState = new InvoiceContainer({ initialSeeding: true });\n    return (\n      \u0026amp;lt;Provider inject={[globalState]}\u0026amp;gt;\n        \u0026amp;lt;AppContainer /\u0026amp;gt;\n      \u0026amp;lt;/Provider\u0026amp;gt;\n    );\n  }\n}\n```\n\n　呼び出し時に``initialSeeding``にオンを指定してます。\n\n## SubscribeでグローバルStateにアクセスする\n\n　SubscribeをHomeScreenに入れて、HomeScreenでInvoiceリストを表示できるようにします。\n\n　まずはHomeScreenの出力を単純にSubscribeで囲んでみます。\n\n``` jsx:HomeScreen.js\nimport React from \u0026amp;quot;react\u0026amp;quot;;\nimport { Button, Text, View } from \u0026amp;quot;react-native\u0026amp;quot;;\nimport { Subscribe } from \u0026amp;quot;unstated\u0026amp;quot;;\n\nimport styles from \u0026amp;quot;../styles.js\u0026amp;quot;;\nimport InvoiceContainer from \u0026amp;quot;../containers/InvoiceContainer\u0026amp;quot;;\n\nclass HomeScreen extends React.Component {\n  render() {\n    return (\n      \u0026amp;lt;Subscribe to={[InvoiceContainer]}\u0026amp;gt;\n        {globalState =\u0026amp;gt; (\n          \u0026amp;lt;View style={styles.container}\u0026amp;gt;\n            \u0026amp;lt;Text\u0026amp;gt;Open up App.js to start working on your app!\u0026amp;lt;/Text\u0026amp;gt;\n            \u0026amp;lt;Text\u0026amp;gt;Hello World!\u0026amp;lt;/Text\u0026amp;gt;\n            \u0026amp;lt;Button title=\u0026amp;quot;Go to InvoiceEdit\u0026amp;quot; onPress={() =\u0026amp;g...&quot;",
    td_title: "&quot;React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する&quot;"
  })</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;

}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" href="https://connpass.com/event/180539/">【Qiita夏祭り】7月22日（水）ライブ配信開催！お申し込みはこちら！</a><a target="_blank" href="https://connpass.com/event/180539/">詳しくはこちら</a></div></div><script async="" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/qiita_bigmining.js.download"></script><div style="display:none"><div class="TagList__label"><span></span><span>JavaScript</span></div><div class="TagList__label"><span></span><span>React</span></div><div class="TagList__label"><span></span><span>reactnative</span></div><div class="TagList__label"><span></span><span>react-native</span></div><div class="TagList__label"><span></span><span>expo</span></div></div><img style="display:block;margin:0;padding:0;border:0;outline:0;width:0;height:0;line-height:0;" alt="" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/bizmatrix"><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"ja","i18nDefaultLocale":"en","href":"https://qiita.com/hitotch/items/36dcc678976bd4ebe006","location":"/hitotch/items/36dcc678976bd4ebe006","scheme":"https","host":"qiita.com","port":null,"pathname":"/hitotch/items/36dcc678976bd4ebe006","search":null,"httpAcceptLanguage":"ja","actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"qH7Mjf1Uz+rWootQ6YIfVPBD3IKx7sxpIP3nu46Dz1qKR8d2WNJVGibtbDK3CEgSK2jDIiamEDmiNR+Hhyqzrw==","locale":"ja"},"currentUser":{"isStaff":false,"isJobseeker":false,"isBetaReleaseEnabled":false,"isEarlyAdapter":false,"name":"","originalId":559163,"profileImageUrl":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Favatars3.githubusercontent.com%2Fu%2F55423883%3Fv%3D4?ixlib=rb-1.2.2\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=9a27f9a0f42b0037c362c3058e093823","urlName":"YUMA-NAGAO","remainingPublicImageUploadableSizeInCurrentMonth":104857600,"monthlyPublicImageUploadableSizeLimit":104857600},"isLoggedIn":true,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticle-react-component-24030312-a06c-415c-aa09-abf4b635dc0f"><div class="p-items logged-in"><div class="p-items_wrapper"><div class="p-items_container"><div class="it-Actions p-items_stickyMenu"><div class="it-Actions_item it-Actions_item-like likable"><a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006/likers" class="it-Actions_likeCount">17</a><button title="Looks Good To Me!" class=""><svg size="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="VerticalLgtmIcon__Lgtm-sc-19v9h1n-0 jMUuwd"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button></div><div class="it-Actions_item"><button title="ストック" class="ArticleStickyMenuStockButton__StockButton-zc1u4a-0 bwruJP"><span class="ArticleStickyMenuStockButton__StockButtonContainer-zc1u4a-1 ePAInp"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" class="StockIcon__Stock-cq5opj-0 jnleGS"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></span></button></div><a class="it-Actions_jumpToCommentButton" href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#comments"><div class="it-Actions_commentCount">0</div><div class="fa fa-fw fa-comment"></div></a><div class="it-Actions_shareButton it-Actions_shareButton-twitter"><span class="fa fa-twitter"></span></div><div class="it-Actions_shareButton it-Actions_shareButton-facebook"><span class="fa fa-facebook"></span></div></div><div class="p-items_main"><div class="p-items_article"><div class="it-Header"><div class="u-flex-center-between mb-3"><div class="it-Header_info"><div class="it-Header_author"><a href="https://qiita.com/hitotch"><img src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/https___avatars2.githubusercontent.com_u_12057602_v=4" alt="hitotch" class="it-Header_authorImage"></a><a href="https://qiita.com/hitotch" class="it-Header_authorName">@<!-- -->hitotch</a></div><div class="it-Header_time"><time datetime="2019-09-05T23:50:25Z">2019年09月06日に投稿</time></div><div class="it-Header_meta"><div class="it-Header_manipulate"><div class="it-Header_dropdown"><span class="it-Header_dropdownToggle" tabindex="0"><span class="fa fa-ellipsis-h fa-lg"></span></span><div class="st-Dropdown right"><div><div class="it-Header_dropdown-title">記事の改善</div><a class="st-Dropdown_item" href="https://qiita.com/drafts/36dcc678976bd4ebe006/edit"><span class="fa fa-fw fa-code-fork pr-1"></span>編集リクエストを送る</a><div class="st-Dropdown_separator"></div></div><div class="it-Header_dropdown-title">記事の情報</div><a class="st-Dropdown_item" href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006/revisions"><span class="fa fa-fw fa-history pr-1"></span>編集履歴</a><a class="st-Dropdown_item" href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006/patches"><span class="fa fa-fw fa-inbox pr-1"></span>編集リクエスト一覧</a><a class="st-Dropdown_item" href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006/likers"><span style="margin-right:4px"><svg size="12" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#777" class="VerticalLgtmIcon__Lgtm-sc-19v9h1n-0 pFoNU"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>LGTMしたユーザ一覧</a><a class="st-Dropdown_item" href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006.md"><span class="fa fa-fw fa-file-text-o pr-1"></span>Markdown で本文を見る</a><div class="st-Dropdown_separator"></div><div class="st-Dropdown_item"><span class="fa fa-fw fa-volume-up pr-1"></span>記事を購読する</div><div class="st-Dropdown_item"><span class="fa fa-fw fa-flag pr-1"></span>問題がある記事を報告する</div></div></div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">この記事にどのような問題がありますか？</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required="">法律違反（著作権侵害、プライバシー侵害、名誉棄損等）</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required="">社会的に不適切（公序良俗に反する）</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required="">宣伝行為</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required="">スパムの疑い</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required="">上記以外だが、Qiitaのコミュニティにふさわしくない（ガイドライン違反）</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="送信"></div></form></div></div></div></div></div><h1 class="it-Header_title">React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する</h1><div class="it-Tags"><a href="https://qiita.com/tags/javascript" class="it-Tags_item"><span>JavaScript</span></a><a href="https://qiita.com/tags/react" class="it-Tags_item"><span>React</span></a><a href="https://qiita.com/tags/reactnative" class="it-Tags_item"><span>reactnative</span></a><a href="https://qiita.com/tags/react-native" class="it-Tags_item"><span>react-native</span></a><a href="https://qiita.com/tags/expo" class="it-Tags_item"><span>expo</span></a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p>この記事は、「<a href="https://qiita.com/hitotch/items/5142fff638c7805d84d5" id="reference-d4ebab6ad3ff738d824e">【連載】初めてのReact Native + Expo開発環境構築入門</a>」の子記事です。環境などの条件は、親記事をご覧ください。</p>

<hr>

<p>　<a href="https://qiita.com/hitotch/items/79533682670d4ecd2355" id="reference-82e52ec99ee8673b502a">前回</a>までに、動作の基本となる画面遷移までできたので、次はInvoice(請求書)を格納しておく場所を作って、そのデータを表示できるようにしましょう。<br>
　簡単にやろうと思えば、unstatedを入れてデータを適当に登録すれば動くのですが、実務を考えてある程度お行儀よくコーディングすることにします。したがって、unstatedの話としては少々遠回りになりますが、ご容赦を。</p>

<h1>
<span id="unstatedreduxではなく" class="fragment"></span><a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#unstatedredux%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8F"><i class="fa fa-link"></i></a>unstated。Reduxではなく。</h1>

<p>　ReactのグローバルState管理には、私はこれまでReduxを使っていました。C#やPHPで多くのAPIを準備して、それらと連携して動作するような複雑なワンページアプリケーションであればRedux+ThunkでOKです。しかし、やりたいことに対して記述量が多いことと、記述場所がActionやらReducerやらばらばらで見通しが悪いことが欠点で、小さなアプリではオーバースペックに思えます。<br>
　そこで登場するのがunstatedです。ちょっと癖はあるものの、コード量は少ないし、なれれば楽勝になります。API通信のためのaxiosとの相性もばっちりです。</p>

<h1>
<span id="ネットがつながらないことを想定" class="fragment"></span><a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#%E3%83%8D%E3%83%83%E3%83%88%E3%81%8C%E3%81%A4%E3%81%AA%E3%81%8C%E3%82%89%E3%81%AA%E3%81%84%E3%81%93%E3%81%A8%E3%82%92%E6%83%B3%E5%AE%9A"><i class="fa fa-link"></i></a>ネットがつながらないことを想定</h1>

<p>　実務でモバイルアプリ（Webアプリではなく）を作りたい理由の一つに、電波の届かないところでも止まらずに動いて、電波のあるところでデータの送受信をしたい、という要件があります。客先で請求書を作って印刷したいときに、その場所が地下でネットが使えないし、もちろんお客さんのWi-Fiをいちいち借りて接続なんてできない、といったことはよくある話です。<br>
　今回のように、請求書発行などの小さな目的のアプリであれば、メモリ上に配列オブジェクトなどで請求書情報を持っておいて、ネットがつながったら同期ボタンでサーバーと同期するという単純な動作で十分実用に耐えます。</p>

<p>　そこで今回は、請求書オブジェクト<code>Invoice</code>、請求書行オブジェクト<code>Item</code>、顧客オブジェクト<code>Customer</code>、商品オブジェクト<code>Product</code>を作成し、それをグローバルStateに格納して取り扱うことにします。</p>

<h1>
<span id="データmodelの作成" class="fragment"></span><a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#%E3%83%87%E3%83%BC%E3%82%BFmodel%E3%81%AE%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>データModelの作成</h1>

<p>　まず、グローバルstateに格納するデータの構造を整えておきます。<br>
　今回のアプリでは、以下のようなイメージでグローバルStateにデータを保持するようにします。</p>

<div class="code-frame" data-lang="text"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre>{
    invoices: [
        [0]: {
            id: 0,
            customer: 15,
            date: "2019/1/1",
            items: [
                [0]: {product: 2, qty: 2, ...},
                [1]: {product: 5, qty: 1, ...},
                [2]: {product: 8, qty: 5, ...},
            ],
            ...
        },
        ...
    ],
    products: [
        [0]: {
            id: 0,
            name: "Red X t-shirt",
            price: 10.5,
            ...
        },
        ...
    ],
    customers: [
        [0]: {
            id: 0,
            name: "ABCDEFG corp.",
            addr1: "123 West Street",
            ...
        },
        ...
    ],
}
</pre></div></div>

<p>　このままハッシュ＆配列でデータ構造を表現してもいいのですが、コードの品質を上げるために、データ構造をちゃんとクラス化（Model化）することにします。<br>
　<code>Invoice</code>, <code>Item</code>, <code>Customer</code>, <code>Product</code>のモデルを、以下のようにクラス化して作成します。MVCのModelと同じ考え方です。お行儀よくgetterとsetterを使い、要件に従ってextendしやすい構造にしています。ここではInvoiceにItemを追加したり削除したりするくらいの機能しか作っていません。</p>

<p><a href="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/https___qiita-image-store.s3.ap-northeast-1.amazonaws.com_0_315589_67b14f56-9d1b-ce2a-a22a-45711e2135.png" target="_blank" rel="nofollow noopener"><img src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/https___qiita-image-store.s3.ap-northeast-1.amazonaws.com_0_315589_67b14f56-9d1b-ce2a-a22a-45711e2135.png" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/315589/67b14f56-9d1b-ce2a-a22a-45711e213583.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F315589%2F67b14f56-9d1b-ce2a-a22a-45711e213583.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=89e4dc0f0c089da2ab5e95b886723dd8 1x" loading="lazy"></a></p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">/models/Invoice.js</span></div>
<div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Invoice</span><span class="p">{</span>
    <span class="kd">constructor</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">date</span><span class="p">,</span> <span class="nx">customer</span><span class="p">,</span> <span class="nx">items</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_id</span> <span class="o">=</span> <span class="nx">id</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_date</span> <span class="o">=</span> <span class="nx">date</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_customer</span> <span class="o">=</span> <span class="nx">customer</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_items</span> <span class="o">=</span> <span class="nx">items</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">get</span> <span class="nx">id</span><span class="p">(){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_id</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">set</span> <span class="nx">id</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">_id</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">get</span> <span class="nx">date</span><span class="p">(){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_date</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">set</span> <span class="nx">date</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">_date</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">get</span> <span class="nx">customer</span><span class="p">(){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_customer</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">set</span> <span class="nx">customer</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">_customer</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">get</span> <span class="nx">items</span><span class="p">(){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_items</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">set</span> <span class="nx">items</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">_items</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> <span class="p">}</span>

    <span class="nx">addItem</span><span class="p">(</span><span class="nx">item</span><span class="p">){</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_items</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">removeItem</span><span class="p">(</span><span class="nx">productId</span><span class="p">){</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_items</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_items</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">product</span> <span class="o">!=</span> <span class="nx">productId</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">/models/Item.js</span></div>
<div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Item</span><span class="p">{</span>
    <span class="kd">constructor</span><span class="p">(</span><span class="nx">product</span><span class="p">,</span> <span class="nx">qty</span><span class="p">,</span> <span class="nx">adjust</span><span class="p">,</span> <span class="nx">credit</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_product</span> <span class="o">=</span> <span class="nx">product</span><span class="p">;</span>        <span class="c1">// Product id</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_qty</span> <span class="o">=</span> <span class="nx">qty</span><span class="p">;</span>                <span class="c1">// Quantity scheduled</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_adjust</span> <span class="o">=</span> <span class="nx">adjust</span><span class="p">;</span>          <span class="c1">// Adjustment on site</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_credit</span> <span class="o">=</span> <span class="nx">credit</span><span class="p">;</span>          <span class="c1">// Returned quantity</span>
    <span class="p">}</span>

    <span class="kd">get</span> <span class="nx">product</span><span class="p">(){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_product</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">set</span> <span class="nx">product</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">_product</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">get</span> <span class="nx">qty</span><span class="p">(){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_qty</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">set</span> <span class="nx">qty</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">_qty</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">get</span> <span class="nx">adjust</span><span class="p">(){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_adjust</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">set</span> <span class="nx">adjust</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">_adjust</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">get</span> <span class="nx">credit</span><span class="p">(){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_credit</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">set</span> <span class="nx">credit</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">_credit</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">/models/Customer.js</span></div>
<div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Customer</span><span class="p">{</span>
    <span class="kd">constructor</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">addr1</span><span class="p">,</span> <span class="nx">addr2</span><span class="p">,</span> <span class="nx">city</span><span class="p">,</span> <span class="nx">state</span><span class="p">,</span> <span class="nx">zip</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_id</span> <span class="o">=</span> <span class="nx">id</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_addr1</span> <span class="o">=</span> <span class="nx">addr1</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_addr2</span> <span class="o">=</span> <span class="nx">addr2</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_city</span> <span class="o">=</span> <span class="nx">city</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_state</span> <span class="o">=</span> <span class="nx">state</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_zip</span> <span class="o">=</span> <span class="nx">zip</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">get</span> <span class="nx">id</span><span class="p">(){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_id</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">set</span> <span class="nx">id</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">_id</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">get</span> <span class="nx">name</span><span class="p">(){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_name</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">set</span> <span class="nx">name</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">_name</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">get</span> <span class="nx">addr1</span><span class="p">(){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_addr1</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">set</span> <span class="nx">addr1</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">_addr1</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">get</span> <span class="nx">addr2</span><span class="p">(){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_addr2</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">set</span> <span class="nx">addr2</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">_addr2</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">get</span> <span class="nx">city</span><span class="p">(){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_city</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">set</span> <span class="nx">city</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">_city</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">get</span> <span class="nx">state</span><span class="p">(){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_state</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">set</span> <span class="nx">state</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">_state</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">get</span> <span class="nx">zip</span><span class="p">(){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_zip</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">set</span> <span class="nx">zip</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">_zip</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">/models/Product.js</span></div>
<div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Product</span><span class="p">{</span>
    <span class="kd">constructor</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">shortName</span><span class="p">,</span> <span class="nx">price</span><span class="p">,</span> <span class="nx">cost</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_id</span> <span class="o">=</span> <span class="nx">id</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_shortName</span> <span class="o">=</span> <span class="nx">shortName</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_price</span> <span class="o">=</span> <span class="nx">price</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_cost</span> <span class="o">=</span> <span class="nx">cost</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">get</span> <span class="nx">id</span><span class="p">(){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_id</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">set</span> <span class="nx">id</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">_id</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">get</span> <span class="nx">name</span><span class="p">(){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_name</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">set</span> <span class="nx">name</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">_name</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">get</span> <span class="nx">shortName</span><span class="p">(){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_shortName</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">set</span> <span class="nx">shortName</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">_shortName</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">get</span> <span class="nx">price</span><span class="p">(){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_price</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">set</span> <span class="nx">price</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">_price</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">get</span> <span class="nx">cost</span><span class="p">(){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_cost</span><span class="p">;</span> <span class="p">}</span>
    <span class="kd">set</span> <span class="nx">cost</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">_cost</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>

<h1>
<span id="seederの作成" class="fragment"></span><a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#seeder%E3%81%AE%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>Seederの作成</h1>

<p>　動作テスト用に、テストデータを発生させるシーダーを準備しておきます。</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">/models/seeder/Seeder.js</span></div>
<div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><span class="k">import</span> <span class="nx">Customer</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../Customer</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Invoice</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../Invoice</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Item</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../Item</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Product</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../Product</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Seeder</span> <span class="p">{</span>
  <span class="kd">static</span> <span class="nx">getSeed</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">customers</span><span class="p">:</span> <span class="p">[</span>
        <span class="k">new</span> <span class="nx">Customer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ABC Store</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">123 Abc St.</span><span class="dl">"</span><span class="p">,</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">New York</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">NY</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">10001</span><span class="dl">"</span><span class="p">),</span>
        <span class="k">new</span> <span class="nx">Customer</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">123 Deli</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">1 Def Ave.</span><span class="dl">"</span><span class="p">,</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">New York</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">NY</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">10002</span><span class="dl">"</span><span class="p">),</span>
        <span class="k">new</span> <span class="nx">Customer</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Xyz mart</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">23 Xyz Blvd.</span><span class="dl">"</span><span class="p">,</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">New York</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">NY</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">10003</span><span class="dl">"</span><span class="p">)</span>
      <span class="p">],</span>
      <span class="na">products</span><span class="p">:</span> <span class="p">[</span>
        <span class="k">new</span> <span class="nx">Product</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Blue ribbon</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">B.R.</span><span class="dl">"</span><span class="p">,</span> <span class="mf">10.5</span><span class="p">,</span> <span class="mf">7.2</span><span class="p">),</span>
        <span class="k">new</span> <span class="nx">Product</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Red ribbon</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">R.R.</span><span class="dl">"</span><span class="p">,</span> <span class="mf">9.5</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nx">Product</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="dl">"</span><span class="s2">White shirt</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">W.S.</span><span class="dl">"</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">9.3</span><span class="p">)</span>
      <span class="p">],</span>
      <span class="na">invoices</span><span class="p">:</span> <span class="p">[</span>
        <span class="k">new</span> <span class="nx">Invoice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="dl">"</span><span class="s2">1/1/2019</span><span class="dl">"</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="k">new</span> <span class="nx">Item</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="k">new</span> <span class="nx">Item</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="k">new</span> <span class="nx">Item</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]),</span>
        <span class="k">new</span> <span class="nx">Invoice</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="dl">"</span><span class="s2">1/1/2019</span><span class="dl">"</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="k">new</span> <span class="nx">Item</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
      <span class="p">]</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>

<h1>
<span id="unstatedをインストール" class="fragment"></span><a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#unstated%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>unstatedをインストール</h1>

<p>　サクッとインストールします。</p>

<div class="code-frame" data-lang="text"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre>npm install unstated
</pre></div></div>

<h1>
<span id="グローバルstateを作る" class="fragment"></span><a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%ABstate%E3%82%92%E4%BD%9C%E3%82%8B"><i class="fa fa-link"></i></a>グローバルStateを作る</h1>

<p>　unstatedでグローバルStateを作るには、Provider、Subscribe、Containerの３つを使います。簡単に知るには<a href="https://qiita.com/kaba/items/b05f680f850dd46548f3" id="reference-81f83fe4d2e790b8c07f">この記事</a>あたりがよろしいかと。</p>

<h2>
<span id="providerでアプリ全体を囲む" class="fragment"></span><a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#provider%E3%81%A7%E3%82%A2%E3%83%97%E3%83%AA%E5%85%A8%E4%BD%93%E3%82%92%E5%9B%B2%E3%82%80"><i class="fa fa-link"></i></a>Providerでアプリ全体を囲む</h2>

<div class="code-frame" data-lang="jsx">
<div class="code-lang"><span class="bold">App.js</span></div>
<div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><span class="k">import</span> <span class="p">{</span> <span class="nx">Provider</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">unstated</span><span class="dl">"</span><span class="p">;</span>
<span class="p">...</span>
<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">App</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="p">&lt;</span><span class="nc">Provider</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">AppContainer</span> <span class="p">/&gt;</span>
      <span class="p">&lt;/</span><span class="nc">Provider</span><span class="p">&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>

<p>　これでアプリ全体でSubscribeコンポーネントが使えるようになりました。</p>

<h2>
<span id="containerを作る" class="fragment"></span><a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#container%E3%82%92%E4%BD%9C%E3%82%8B"><i class="fa fa-link"></i></a>Containerを作る</h2>

<p>　Containerは、StateやStateに関連する処理の実体クラスです。Containerを1つ作って、アプリ内で使うグローバルStateを作り、そのStateに対する処理内容(メソッド)を追加します。当然、Containerはいろんなコンポーネントから使うことになるので、ファイル化してimportできるようにしておきましょう。containersフォルダを作って、その下にInvoiceContainerという名前のContainerを作ります。</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">/containers/InvoiceContainer.js</span></div>
<div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><span class="k">import</span> <span class="p">{</span> <span class="nx">Container</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">unstated</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Seeder</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../models/seeder/Seeder.js</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">InvoiceContainer</span> <span class="kd">extends</span> <span class="nx">Container</span> <span class="p">{</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">data</span><span class="p">:</span> <span class="nx">props</span><span class="p">.</span><span class="nx">initialSeeding</span> <span class="p">?</span> <span class="nx">Seeder</span><span class="p">.</span><span class="nx">getSeed</span><span class="p">()</span> <span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">getEmptyData</span><span class="p">()</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="nx">seed</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">data</span><span class="p">:</span> <span class="nx">Seeder</span><span class="p">.</span><span class="nx">getSeed</span><span class="p">()</span> <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">clear</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">data</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">getEmptyData</span><span class="p">()</span> <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">getEmptyData</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">customers</span><span class="p">:</span> <span class="p">[],</span>
      <span class="na">products</span><span class="p">:</span> <span class="p">[],</span>
      <span class="na">invoices</span><span class="p">:</span> <span class="p">[]</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>

<p>　ここでは、<code>data</code>という名前のStateだけ登録します。今回はContainerをインスタンス化するときに引数を渡して、シードするかしないか動作を分けることにします。initialSeedingというプロパティとして引数を読んで、trueなら<code>data</code>をSeederからとってくる、falseなら<code>data</code>を空データにする、とします。このように引数によって初期Stateを変更したい場合は、constructorを使います。<br>
　初期化が終わった後、各コンポーネントからシードを実行したりデータをクリアできるように、シード動作をseed()として定義し、クリア動作をclear()として定義しています。</p>

<p>　コンストラクタでは<code>this.state =</code>のように直接stateを変更していますが、send()やclear()では変更検知をReactが検知できるようにthis.setStateを使っていることに注意してください。</p>

<p>　さて、これでグローバルStateの準備ができましたので、次は利用側のコードを書いていきます。</p>

<h2>
<span id="containerのインスタンスを先に作っておく" class="fragment"></span><a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#container%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%B3%E3%82%B9%E3%82%92%E5%85%88%E3%81%AB%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%8A%E3%81%8F"><i class="fa fa-link"></i></a>Containerのインスタンスを先に作っておく</h2>

<p>　これは、初期値指定をしない場合は不要なのです。Containerのインスタンスを先に作っておいて、ProviderにInjectすることによって、SubscribeでContainerを使うときにはすでに「狙ったように」初期化されている状態にできます。そうでなければ、SubscribeでContainerを使うときには「よしなに」初期化される（constructorを使わずに<code>state =</code>で初期化することになるのと、もしインスタンスがまだ作られてなかったらインスタンスを作ってくれる）ことになります。</p>

<div class="code-frame" data-lang="jsx">
<div class="code-lang"><span class="bold">App.js</span></div>
<div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><span class="k">import</span> <span class="nx">InvoiceContainer</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./containers/InvoiceContainer</span><span class="dl">"</span><span class="p">;</span>
<span class="p">...</span>
<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">App</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">globalState</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">InvoiceContainer</span><span class="p">({</span> <span class="na">initialSeeding</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="p">&lt;</span><span class="nc">Provider</span> <span class="na">inject=</span><span class="si">{</span><span class="p">[</span><span class="nx">globalState</span><span class="p">]</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">AppContainer</span> <span class="p">/&gt;</span>
      <span class="p">&lt;/</span><span class="nc">Provider</span><span class="p">&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>

<p>　呼び出し時に<code>initialSeeding</code>にオンを指定してます。</p>

<h2>
<span id="subscribeでグローバルstateにアクセスする" class="fragment"></span><a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#subscribe%E3%81%A7%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%ABstate%E3%81%AB%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>SubscribeでグローバルStateにアクセスする</h2>

<p>　SubscribeをHomeScreenに入れて、HomeScreenでInvoiceリストを表示できるようにします。</p>

<p>　まずはHomeScreenの出力を単純にSubscribeで囲んでみます。</p>

<div class="code-frame" data-lang="jsx">
<div class="code-lang"><span class="bold">HomeScreen.js</span></div>
<div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Button</span><span class="p">,</span> <span class="nx">Text</span><span class="p">,</span> <span class="nx">View</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-native</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Subscribe</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">unstated</span><span class="dl">"</span><span class="p">;</span>

<span class="k">import</span> <span class="nx">styles</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../styles.js</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">InvoiceContainer</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../containers/InvoiceContainer</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">HomeScreen</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="p">&lt;</span><span class="nc">Subscribe</span> <span class="na">to=</span><span class="si">{</span><span class="p">[</span><span class="nx">InvoiceContainer</span><span class="p">]</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="si">{</span><span class="nx">globalState</span> <span class="o">=&gt;</span> <span class="p">(</span>
          <span class="p">&lt;</span><span class="nc">View</span> <span class="na">style=</span><span class="si">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">container</span><span class="si">}</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">Text</span><span class="p">&gt;</span>Open up App.js to start working on your app!<span class="p">&lt;/</span><span class="nc">Text</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">Text</span><span class="p">&gt;</span>Hello World!<span class="p">&lt;/</span><span class="nc">Text</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">title=</span><span class="s2">"Go to InvoiceEdit"</span> <span class="na">onPress=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">navigation</span><span class="p">.</span><span class="nx">navigate</span><span class="p">(</span><span class="dl">"</span><span class="s2">InvoiceEdit</span><span class="dl">"</span><span class="p">)</span><span class="si">}</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">title=</span><span class="s2">"Go to Summary"</span> <span class="na">onPress=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">navigation</span><span class="p">.</span><span class="nx">navigate</span><span class="p">(</span><span class="dl">"</span><span class="s2">Summary</span><span class="dl">"</span><span class="p">)</span><span class="si">}</span> <span class="p">/&gt;</span>

            <span class="p">&lt;</span><span class="nc">Text</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">globalState</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">invoices</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">date</span><span class="si">}</span><span class="p">&lt;/</span><span class="nc">Text</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nc">View</span><span class="p">&gt;</span>
        <span class="p">)</span><span class="si">}</span>
      <span class="p">&lt;/</span><span class="nc">Subscribe</span><span class="p">&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">HomeScreen</span><span class="p">;</span>
</pre></div>
</div>

<p>　<code>&lt;Subscribe to={[InvoiceContainer]}&gt;</code> のように、InvoiceContainerのインスタンスではなくクラスそのものを指定していることに注目してください。このままだと初期化されなさそうですが、先の<code>&lt;Provider inject={[globalState]}&gt;</code>で実態をインジェクトしているので、そのインスタンスが自動的に使われます。自分でpropsリレーをするなどの実体管理をしなくていいので、便利ですね。なお、injectをつかわなくても、実態を必要に応じで「よしなに」初期化してくれます。<br>
　ということで、ソースに追加した<code>&lt;Text&gt;{globalState.state.data.invoices[0].date}&lt;/Text&gt;</code>のところで、グローバルStateとして登録されている<code>data</code>の<code>invoices</code>配列の0番の<code>date</code>の内容が表示されることを期待しています。</p>

<p>　実行すると、以下のようにSeederで入れた日付が見られます。<br>
<a href="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/https___qiita-image-store.s3.ap-northeast-1.amazonaws.com_0_315589_f49ff0bb-bfb1-23a2-2ab4-12465a529d.png" target="_blank" rel="nofollow noopener"><img width="375" alt="image.png" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/https___qiita-image-store.s3.ap-northeast-1.amazonaws.com_0_315589_f49ff0bb-bfb1-23a2-2ab4-12465a529d.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/315589/f49ff0bb-bfb1-23a2-2ab4-12465a529d97.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F315589%2Ff49ff0bb-bfb1-23a2-2ab4-12465a529d97.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=34941ccccb3bd36fe6942f2d1766d868 1x" loading="lazy"></a></p>

<p>　大成功！といいたいところですが、1つ困ったことがあります。InvoiceContainerがSubscribeの外で使えない、もちろんrender()の外でも使えないので、invoicesのリストを作るループをrender()の前にかけないのです。。。</p>

<h2>
<span id="画面コンポーネントをhoc化する" class="fragment"></span><a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#%E7%94%BB%E9%9D%A2%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%82%92hoc%E5%8C%96%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>画面コンポーネントをHOC化する</h2>

<p>　HOC化とは、すごく簡単に言うと、機能を追加するためにクラスを上位クラスで包むことです。百聞は一見に如かず、HomeScreenをHOC化します。</p>

<div class="code-frame" data-lang="jsx">
<div class="code-lang"><span class="bold">HomeScreen.js</span></div>
<div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Button</span><span class="p">,</span> <span class="nx">Text</span><span class="p">,</span> <span class="nx">View</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-native</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Subscribe</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">unstated</span><span class="dl">"</span><span class="p">;</span>

<span class="k">import</span> <span class="nx">styles</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../styles.js</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">InvoiceContainer</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../containers/InvoiceContainer</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">HomeScreenContent</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">globalState</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">globalState</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">invoiceList</span> <span class="o">=</span> <span class="p">&lt;</span><span class="nc">Text</span><span class="p">&gt;</span>No invoice<span class="p">&lt;/</span><span class="nc">Text</span><span class="p">&gt;;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">globalState</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">invoices</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">invoiceList</span> <span class="o">=</span> <span class="nx">globalState</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">invoices</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">invoice</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">&lt;</span><span class="nc">Text</span> <span class="na">key=</span><span class="si">{</span><span class="nx">invoice</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">invoice</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> : </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">invoice</span><span class="p">.</span><span class="nx">date</span><span class="si">}</span><span class="p">&lt;/</span><span class="nc">Text</span><span class="p">&gt;;</span>
      <span class="p">});</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="p">&lt;</span><span class="nc">View</span> <span class="na">style=</span><span class="si">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">container</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Text</span><span class="p">&gt;</span>Open up App.js to start working on your app!<span class="p">&lt;/</span><span class="nc">Text</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Text</span><span class="p">&gt;</span>Hello World!<span class="p">&lt;/</span><span class="nc">Text</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">title=</span><span class="s2">"Go to InvoiceEdit"</span> <span class="na">onPress=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">navigation</span><span class="p">.</span><span class="nx">navigate</span><span class="p">(</span><span class="dl">"</span><span class="s2">InvoiceEdit</span><span class="dl">"</span><span class="p">)</span><span class="si">}</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">title=</span><span class="s2">"Go to Summary"</span> <span class="na">onPress=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">navigation</span><span class="p">.</span><span class="nx">navigate</span><span class="p">(</span><span class="dl">"</span><span class="s2">Summary</span><span class="dl">"</span><span class="p">)</span><span class="si">}</span> <span class="p">/&gt;</span>

        <span class="si">{</span><span class="nx">invoiceList</span><span class="si">}</span>
      <span class="p">&lt;/</span><span class="nc">View</span><span class="p">&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">HomeScreen</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">navigation</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Subscribe</span> <span class="na">to=</span><span class="si">{</span><span class="p">[</span><span class="nx">InvoiceContainer</span><span class="p">]</span><span class="si">}</span><span class="p">&gt;</span>
      <span class="si">{</span><span class="nx">globalState</span> <span class="o">=&gt;</span> <span class="p">&lt;</span><span class="nc">HomeScreenContent</span> <span class="na">globalState=</span><span class="si">{</span><span class="nx">globalState</span><span class="si">}</span> <span class="na">navigation=</span><span class="si">{</span><span class="nx">navigation</span><span class="si">}</span> <span class="p">/&gt;</span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nc">Subscribe</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">HomeScreen</span><span class="p">;</span>
</pre></div>
</div>

<p>　もともとのHomeScreenクラスをHomeScreenContentと改名し、上位クラスをHomeScreenとしました。上位クラスのHomeScreenで、Subscribeの中にHomeScreenContentを内包することで、propsにInvoiceContainerクラスの実体（globalStateという名前にしました）を渡せました。これにより、HomeScreenContentでは通常のthis.propsのメンバーのように、グローバルStateにアクセスできます。一見、「結局propsを手動で渡してる」ように見えますが、完全にこのクラスのファイル内で自己完結しているので、親コンポーネントからpropsを渡すのとは全く異なります。<br>
　もうひとつ注意すべき点は、<code>navigation</code> プロパティをHomeScreenContentに伝搬してあげることです。こうしないと、HomeScreenContentのほうでreact-navigationを使えません。<br>
　あとはいつものReactと同じで、invoiceをループしてinvoiceListにコンテンツを格納し、内に{invoiceList}として表示しています。</p>

<p><a href="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/https___qiita-image-store.s3.ap-northeast-1.amazonaws.com_0_315589_0b55489e-7b69-b930-32a6-590c12f289.png" target="_blank" rel="nofollow noopener"><img width="375" alt="image.png" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/https___qiita-image-store.s3.ap-northeast-1.amazonaws.com_0_315589_0b55489e-7b69-b930-32a6-590c12f289.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/315589/0b55489e-7b69-b930-32a6-590c12f289f5.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F315589%2F0b55489e-7b69-b930-32a6-590c12f289f5.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=14e7d7d7271c01d49dfcb3bb6ebbcc4d 1x" loading="lazy"></a></p>

<h1>
<span id="書き込み" class="fragment"></span><a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#%E6%9B%B8%E3%81%8D%E8%BE%BC%E3%81%BF"><i class="fa fa-link"></i></a>書き込み</h1>

<p>　最後に、グローバルStateに格納されているデータを変更するコードを入れてみましょう。<br>
　Summary画面にボタンを追加して、ID2番のInvoiceの日付を修正してみます。Summary画面もHOC化して、ボタンを追加し、ボタンイベント内でグローバルStateを変更してみます。</p>

<div class="code-frame" data-lang="jsx">
<div class="code-lang"><span class="bold">SummaryScreen.js</span></div>
<div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Button</span><span class="p">,</span> <span class="nx">Text</span><span class="p">,</span> <span class="nx">View</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-native</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Subscribe</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">unstated</span><span class="dl">"</span><span class="p">;</span>

<span class="k">import</span> <span class="nx">InvoiceContainer</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../containers/InvoiceContainer</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">styles</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../styles.js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">SummaryScreenContent</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="p">&lt;</span><span class="nc">View</span> <span class="na">style=</span><span class="si">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">container</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Text</span><span class="p">&gt;</span>Summary Screen<span class="p">&lt;/</span><span class="nc">Text</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Button</span>
          <span class="na">title=</span><span class="s2">"Modify Inv#2"</span>
          <span class="na">onPress=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">globalState</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
            <span class="nx">data</span><span class="p">.</span><span class="nx">invoices</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">date</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">2/2/2020</span><span class="dl">"</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">globalState</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">data</span><span class="p">:</span> <span class="nx">data</span> <span class="p">});</span>
          <span class="p">}</span><span class="si">}</span>
        <span class="p">/&gt;</span>
      <span class="p">&lt;/</span><span class="nc">View</span><span class="p">&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">SummaryScreen</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">navigation</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="p">&lt;</span><span class="nc">Subscribe</span> <span class="na">to=</span><span class="si">{</span><span class="p">[</span><span class="nx">InvoiceContainer</span><span class="p">]</span><span class="si">}</span><span class="p">&gt;</span>
    <span class="si">{</span><span class="nx">globalState</span> <span class="o">=&gt;</span> <span class="p">&lt;</span><span class="nc">SummaryScreenContent</span> <span class="na">globalState=</span><span class="si">{</span><span class="nx">globalState</span><span class="si">}</span> <span class="na">navigation=</span><span class="si">{</span><span class="nx">navigation</span><span class="si">}</span> <span class="p">/&gt;</span><span class="si">}</span>
  <span class="p">&lt;/</span><span class="nc">Subscribe</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">SummaryScreen</span><span class="p">;</span>
</pre></div>
</div>

<p>　<code>this.props.globalState.state.data</code>にデータが入っているのでそれを書き換えます。直接書き換えずに、必ずsetStateしてください。でないと、通常のState変更同様で、画面の内容が書き換わりません。</p>

<p>では実行してSummary画面を開けます。</p>

<p><a href="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/https___qiita-image-store.s3.ap-northeast-1.amazonaws.com_0_315589_e38a5ed9-8f64-cfb8-7921-15a56a80e7.png" target="_blank" rel="nofollow noopener"><img width="375" alt="image.png" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/https___qiita-image-store.s3.ap-northeast-1.amazonaws.com_0_315589_e38a5ed9-8f64-cfb8-7921-15a56a80e7.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/315589/e38a5ed9-8f64-cfb8-7921-15a56a80e794.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F315589%2Fe38a5ed9-8f64-cfb8-7921-15a56a80e794.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=6e4b14b81e2a8d81bd5c7436d2febe23 1x" loading="lazy"></a></p>

<p>新しいボタンを押してからBackすると、</p>

<p><a href="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/https___qiita-image-store.s3.ap-northeast-1.amazonaws.com_0_315589_358086f9-d568-dbfc-148f-5b56c6ada7.png" target="_blank" rel="nofollow noopener"><img width="375" alt="image.png" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/https___qiita-image-store.s3.ap-northeast-1.amazonaws.com_0_315589_358086f9-d568-dbfc-148f-5b56c6ada7.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/315589/358086f9-d568-dbfc-148f-5b56c6ada76e.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F315589%2F358086f9-d568-dbfc-148f-5b56c6ada76e.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=fccb344fed1d5a53119279867e096c0c 1x" loading="lazy"></a></p>

<p>2行目のInvoiceの日付が変わってます！<br>
Reactらしい挙動をしてくれましたね。</p>
</div></div></section><div class="it-Footer"><div class="it-Footer_actions"><div class="it-Footer_editRequest"><a href="https://qiita.com/drafts/36dcc678976bd4ebe006/edit" class="u-link-no-underline"><span>編集リクエスト</span></a></div><div class="it-Footer_stock"><button><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" class="StockIcon__Stock-cq5opj-0 fEysOa"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg><span class="it-Footer_stockLabel">ストック</span></button></div><div class="it-Footer_like" title="Looks Good To Me!"><button style="background-color:#fff"><span style="width:100%;height:100%;display:flex;align-items:center;justify-content:center"><svg size="56" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 564.81 145.68" color="#55C500" class="LgtmIcon__Lgtm-sc-1e4ee48-0 ZHnTl"><path d="M0 3.85h38.39v106.5h64.16v32H0zM195.41 66.82h71.82q.91 17.84-4 32.35A68.89 68.89 0 01248.71 124a65.49 65.49 0 01-22.9 16 74.08 74.08 0 01-29.17 5.65 78.16 78.16 0 01-54.17-21.32 74.1 74.1 0 01-16.42-23.21 68.08 68.08 0 01-6-28.41 67.7 67.7 0 016-28.42 74.44 74.44 0 0116.42-23.1 76.37 76.37 0 0124.32-15.52 78.92 78.92 0 0184.43 16.06l-25 25A36.52 36.52 0 00213.57 36a37.65 37.65 0 00-31.83-.87 37.7 37.7 0 00-12.08 8.57 40.75 40.75 0 00-8.17 12.91 42.8 42.8 0 00-3 16.22 42.91 42.91 0 003 16.17 40.44 40.44 0 008.17 13 37.4 37.4 0 0012.08 8.57 36.07 36.07 0 0014.9 3.11q14.38 0 22.13-5.35a25.46 25.46 0 0010.31-14.65h-33.77zM319.44 36.21h-36.55v-32h111.18v32h-36.45v106.5h-38.18zM486.82 109l-29.73-44.18v77.89H418.7V4.24h33.83l39 55.09 39.86-55.09h33.42v138.47h-38.38V65.23L496.19 109z"></path></svg></span></button><a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006/likers" class="it-Footer_likeCount">17</a></div></div><div class="it-Footer_social"><div class="it-Footer_shareButton it-Footer_shareButton-twitter"><span class="fa fa-twitter"></span></div><div class="it-Footer_shareButton it-Footer_shareButton-facebook"><span class="fa fa-facebook"></span></div></div></div><div class="ai-Container"><div class="ai-User"><a href="https://qiita.com/hitotch"><img src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/https___avatars2.githubusercontent(1).com_u_12057602_v=4" alt="hitotch" class="ai-User_image"></a><div class="ai-User_body"><div class="ai-User_header"><a href="https://qiita.com/hitotch" class="ai-User_name">藤崎 仁美</a><a href="https://qiita.com/hitotch" class="ai-User_urlname">@<!-- -->hitotch</a></div><div class="ai-User_description">お仕事や協力開発、越境相談など大歓迎。
松下電器産業株式会社（現パナソニック）でレッツノートを設計、ホイールパッドなどを発明。2007年ニューヨークにて独立し、主に在米日系企業のシステム開発を請け負うかたわら、暇を見つけては新技術に触れてニタニタしています。</div><div class="ai-User_footer"><button class="UserFollowButton-sc-1hmm0rc-0 iytOeR">フォロー</button></div></div></div></div><div><div class="it-Ads_afterBodyContainer it-Ads_afterBodyContainer-wide mt-3"><div class="it-Ads_afterBodyWrapper"><div id="dfp-slot-article-after-body-for-pc-left-login-user" class="ad-336x280" data-test-adunitpath="/383564218/qiita.com_loginuser_under-article-left" elementtiming="gpt-dfp-slot-article-after-body-for-pc-left-login-user" data-testid="ArticleAdsAfterBody_AdUnit"></div></div><div class="it-Ads_afterBodyWrapper"><div id="dfp-slot-article-after-body-for-pc-right-login-user" class="ad-336x280" data-test-adunitpath="/383564218/qiita.com_loginuser_under-article-right" elementtiming="gpt-dfp-slot-article-after-body-for-pc-right-login-user" data-testid="ArticleAdsAfterBody_AdUnit"></div></div></div></div></div></div><div class="p-items_options"><div class="mt-2"><div id="dfp-slot-article-sidebar-top-login-user" class="ad-300x250" data-test-adunitpath="/383564218/qiita.com_loginuser_sidebar-top" elementtiming="gpt-dfp-slot-article-sidebar-top-login-user" data-testid="ArticleAdsSidebarTop_AdUnit"></div></div></div><div class="p-items_toc"><div class="mt-2"><div id="dfp-slot-article-sidebar-bottom-login-user" class="ad-300x250" data-test-adunitpath="/383564218/qiita.com_loginuser_sidebar-bottom" elementtiming="gpt-dfp-slot-article-sidebar-bottom-login-user" data-testid="ArticleAdsSidebarBottom_AdUnit"></div></div><div class="it-Toc"><div class="it-Toc_nav"><ul>
<li>
<a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#unstatedredux%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8F">unstated。Reduxではなく。</a>
</li>
<li>
<a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#%E3%83%8D%E3%83%83%E3%83%88%E3%81%8C%E3%81%A4%E3%81%AA%E3%81%8C%E3%82%89%E3%81%AA%E3%81%84%E3%81%93%E3%81%A8%E3%82%92%E6%83%B3%E5%AE%9A">ネットがつながらないことを想定</a>
</li>
<li>
<a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#%E3%83%87%E3%83%BC%E3%82%BFmodel%E3%81%AE%E4%BD%9C%E6%88%90">データModelの作成</a>
</li>
<li>
<a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#seeder%E3%81%AE%E4%BD%9C%E6%88%90">Seederの作成</a>
</li>
<li>
<a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#unstated%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB">unstatedをインストール</a>
</li>
<li>
<a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%ABstate%E3%82%92%E4%BD%9C%E3%82%8B">グローバルStateを作る</a>
<ul>
<li>
<a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#provider%E3%81%A7%E3%82%A2%E3%83%97%E3%83%AA%E5%85%A8%E4%BD%93%E3%82%92%E5%9B%B2%E3%82%80">Providerでアプリ全体を囲む</a>
</li>
<li>
<a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#container%E3%82%92%E4%BD%9C%E3%82%8B">Containerを作る</a>
</li>
<li>
<a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#container%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%B3%E3%82%B9%E3%82%92%E5%85%88%E3%81%AB%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%8A%E3%81%8F">Containerのインスタンスを先に作っておく</a>
</li>
<li>
<a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#subscribe%E3%81%A7%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%ABstate%E3%81%AB%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%99%E3%82%8B">SubscribeでグローバルStateにアクセスする</a>
</li>
<li>
<a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#%E7%94%BB%E9%9D%A2%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%82%92hoc%E5%8C%96%E3%81%99%E3%82%8B">画面コンポーネントをHOC化する</a>
</li>
</ul>
</li>
<li>
<a href="https://qiita.com/hitotch/items/36dcc678976bd4ebe006#%E6%9B%B8%E3%81%8D%E8%BE%BC%E3%81%BF">書き込み</a>
</li>
</ul>
</div></div></div></div></div><div class="p-items_wrapper p-items_wrapper-white"><div class="p-items_container"><div class="p-items_leftDummy"></div><div class="p-items_main"><div class="p-items_aside px-5 p-2@s"><div id="logly-lift-4279494"><div class="tl-DummyItemList p-2"><div class="tl-DummyItemList_content tl-DummyItem"><div class="tl-DummyItem_image mr-1"></div><div class="tl-DummyItem_body"><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div></div></div><div class="tl-DummyItemList_content tl-DummyItem"><div class="tl-DummyItem_image mr-1"></div><div class="tl-DummyItem_body"><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div></div></div><div class="tl-DummyItemList_content tl-DummyItem"><div class="tl-DummyItem_image mr-1"></div><div class="tl-DummyItem_body"><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div></div></div><div class="tl-DummyItemList_content tl-DummyItem"><div class="tl-DummyItem_image mr-1"></div><div class="tl-DummyItem_body"><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div></div></div><div class="tl-DummyItemList_content tl-DummyItem"><div class="tl-DummyItem_image mr-1"></div><div class="tl-DummyItem_body"><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div></div></div></div></div></div><div class="p-items_aside mt-5 px-5 p-2@s"></div><div></div><div class="p-items_aside mt-6 px-5 p-2@s" id="comments-wrapper"><div id="comments" class="co-ItemWrapper"><div class="co-ItemWrapper_title mb-2"><span class="fa fa-comments mr-1"></span>コメント</div><div class="mb-4">この記事にコメントはありません。</div><div style="margin-top:30px"><div><div><div class="MarkdownForm__Header-sc-8atc6s-0 kRprlH"><img src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/https___avatars3.githubusercontent.com_u_55423883_v=4" width="36" height="36" class="Avatar__Image-sc-1u4xwgc-0 hGIfZz"><span class="MarkdownForm__HeaderTitle-sc-8atc6s-1 iLfETO">投稿する</span></div><div class="MarkdownForm__ContentHeader-sc-8atc6s-2 iPNArY"><div class="MarkdownForm__ContentHeaderTabs-sc-8atc6s-3 hKtrgB"><div class="MarkdownForm__ContentHeaderTabsItem-sc-8atc6s-4 geVGIN">編集</div><div class="MarkdownForm__ContentHeaderTabsItem-sc-8atc6s-4 eVoook">プレビュー</div></div><div class="MarkdownForm__ContentHeaderToolbar-sc-8atc6s-5 gEaHIW"><a href="https://qiita.com/Qiita/items/c686397e4a0f4f11683d" target="_blank" title="Markdownの書き方" class="MarkdownForm__ContentHeaderToolbarLink-sc-8atc6s-7 kujFRE"><span class="fa fa-question-circle fa-lg"></span></a><div title="絵文字を選択" class="MarkdownForm__ContentHeaderToolbarItem-sc-8atc6s-6 gSwABc"><span class="fa fa-smile-o fa-lg"></span></div></div></div><div class="MarkdownForm__Body-sc-8atc6s-10 ggttoR"><textarea placeholder="テキストを入力" class="MarkdownForm__CommentFormTextarea-sc-8atc6s-12 gpzZUg" style="overflow: hidden; overflow-wrap: break-word; resize: none; height: 100px;"></textarea><div style="display:none;margin-bottom:0" class="MarkdownForm__BodyPreview-sc-8atc6s-11 jEGdRm co-Item_text"><div></div></div></div><div class="MarkdownForm__Footer-sc-8atc6s-13 jAAlnX"><div class="MarkdownForm__Uploader-sc-8atc6s-14 iNZDJN"><span class="MarkdownForm__UploaderButton-sc-8atc6s-15 fciFvq"><i class="fa fa-picture-o"></i>画像を選択</span><span title="アップロード可能なサイズ" class="MarkdownForm__UploaderText-sc-8atc6s-16 jrfVqC">0B / 100MB</span></div><button style="margin-left:auto" class="Button-sc-998iob-0 gHoyWO" color="primary">投稿</button></div><input type="file" style="display:none"></div></div></div></div></div></div><div class="p-items_rightDummy"></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticle" data-dom-id="PersonalArticle-react-component-24030312-a06c-415c-aa09-abf4b635dc0f">{"article":{"body":"\u003cp\u003eこの記事は、「\u003ca href=\"https://qiita.com/hitotch/items/5142fff638c7805d84d5\" id=\"reference-d4ebab6ad3ff738d824e\"\u003e【連載】初めてのReact Native + Expo開発環境構築入門\u003c/a\u003e」の子記事です。環境などの条件は、親記事をご覧ください。\u003c/p\u003e\n\n\u003chr\u003e\n\n\u003cp\u003e　\u003ca href=\"https://qiita.com/hitotch/items/79533682670d4ecd2355\" id=\"reference-82e52ec99ee8673b502a\"\u003e前回\u003c/a\u003eまでに、動作の基本となる画面遷移までできたので、次はInvoice(請求書)を格納しておく場所を作って、そのデータを表示できるようにしましょう。\u003cbr\u003e\n　簡単にやろうと思えば、unstatedを入れてデータを適当に登録すれば動くのですが、実務を考えてある程度お行儀よくコーディングすることにします。したがって、unstatedの話としては少々遠回りになりますが、ご容赦を。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"unstatedreduxではなく\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#unstatedredux%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eunstated。Reduxではなく。\u003c/h1\u003e\n\n\u003cp\u003e　ReactのグローバルState管理には、私はこれまでReduxを使っていました。C#やPHPで多くのAPIを準備して、それらと連携して動作するような複雑なワンページアプリケーションであればRedux+ThunkでOKです。しかし、やりたいことに対して記述量が多いことと、記述場所がActionやらReducerやらばらばらで見通しが悪いことが欠点で、小さなアプリではオーバースペックに思えます。\u003cbr\u003e\n　そこで登場するのがunstatedです。ちょっと癖はあるものの、コード量は少ないし、なれれば楽勝になります。API通信のためのaxiosとの相性もばっちりです。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ネットがつながらないことを想定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%8D%E3%83%83%E3%83%88%E3%81%8C%E3%81%A4%E3%81%AA%E3%81%8C%E3%82%89%E3%81%AA%E3%81%84%E3%81%93%E3%81%A8%E3%82%92%E6%83%B3%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eネットがつながらないことを想定\u003c/h1\u003e\n\n\u003cp\u003e　実務でモバイルアプリ（Webアプリではなく）を作りたい理由の一つに、電波の届かないところでも止まらずに動いて、電波のあるところでデータの送受信をしたい、という要件があります。客先で請求書を作って印刷したいときに、その場所が地下でネットが使えないし、もちろんお客さんのWi-Fiをいちいち借りて接続なんてできない、といったことはよくある話です。\u003cbr\u003e\n　今回のように、請求書発行などの小さな目的のアプリであれば、メモリ上に配列オブジェクトなどで請求書情報を持っておいて、ネットがつながったら同期ボタンでサーバーと同期するという単純な動作で十分実用に耐えます。\u003c/p\u003e\n\n\u003cp\u003e　そこで今回は、請求書オブジェクト\u003ccode\u003eInvoice\u003c/code\u003e、請求書行オブジェクト\u003ccode\u003eItem\u003c/code\u003e、顧客オブジェクト\u003ccode\u003eCustomer\u003c/code\u003e、商品オブジェクト\u003ccode\u003eProduct\u003c/code\u003eを作成し、それをグローバルStateに格納して取り扱うことにします。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"データmodelの作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%87%E3%83%BC%E3%82%BFmodel%E3%81%AE%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eデータModelの作成\u003c/h1\u003e\n\n\u003cp\u003e　まず、グローバルstateに格納するデータの構造を整えておきます。\u003cbr\u003e\n　今回のアプリでは、以下のようなイメージでグローバルStateにデータを保持するようにします。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e{\n    invoices: [\n        [0]: {\n            id: 0,\n            customer: 15,\n            date: \"2019/1/1\",\n            items: [\n                [0]: {product: 2, qty: 2, ...},\n                [1]: {product: 5, qty: 1, ...},\n                [2]: {product: 8, qty: 5, ...},\n            ],\n            ...\n        },\n        ...\n    ],\n    products: [\n        [0]: {\n            id: 0,\n            name: \"Red X t-shirt\",\n            price: 10.5,\n            ...\n        },\n        ...\n    ],\n    customers: [\n        [0]: {\n            id: 0,\n            name: \"ABCDEFG corp.\",\n            addr1: \"123 West Street\",\n            ...\n        },\n        ...\n    ],\n}\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e　このままハッシュ＆配列でデータ構造を表現してもいいのですが、コードの品質を上げるために、データ構造をちゃんとクラス化（Model化）することにします。\u003cbr\u003e\n　\u003ccode\u003eInvoice\u003c/code\u003e, \u003ccode\u003eItem\u003c/code\u003e, \u003ccode\u003eCustomer\u003c/code\u003e, \u003ccode\u003eProduct\u003c/code\u003eのモデルを、以下のようにクラス化して作成します。MVCのModelと同じ考え方です。お行儀よくgetterとsetterを使い、要件に従ってextendしやすい構造にしています。ここではInvoiceにItemを追加したり削除したりするくらいの機能しか作っていません。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F315589%2F67b14f56-9d1b-ce2a-a22a-45711e213583.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=771457ca1a1f91ffe91b35d35ba473a3\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F315589%2F67b14f56-9d1b-ce2a-a22a-45711e213583.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=771457ca1a1f91ffe91b35d35ba473a3\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/315589/67b14f56-9d1b-ce2a-a22a-45711e213583.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F315589%2F67b14f56-9d1b-ce2a-a22a-45711e213583.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=89e4dc0f0c089da2ab5e95b886723dd8 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003e/models/Invoice.js\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eexport\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e \u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nx\"\u003eInvoice\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003econstructor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003edate\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ecustomer\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eitems\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_id\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_date\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003edate\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_customer\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ecustomer\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_items\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eitems\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"kd\"\u003eget\u003c/span\u003e \u003cspan class=\"nx\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_id\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eset\u003c/span\u003e \u003cspan class=\"nx\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_id\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eget\u003c/span\u003e \u003cspan class=\"nx\"\u003edate\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_date\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eset\u003c/span\u003e \u003cspan class=\"nx\"\u003edate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_date\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eget\u003c/span\u003e \u003cspan class=\"nx\"\u003ecustomer\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_customer\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eset\u003c/span\u003e \u003cspan class=\"nx\"\u003ecustomer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_customer\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eget\u003c/span\u003e \u003cspan class=\"nx\"\u003eitems\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_items\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eset\u003c/span\u003e \u003cspan class=\"nx\"\u003eitems\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_items\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"nx\"\u003eaddItem\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_items\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003epush\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eremoveItem\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eproductId\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_items\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_items\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003efilter\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eitem\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"nx\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eproduct\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"nx\"\u003eproductId\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003e/models/Item.js\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eexport\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e \u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nx\"\u003eItem\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003econstructor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eproduct\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eqty\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eadjust\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ecredit\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_product\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eproduct\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e        \u003cspan class=\"c1\"\u003e// Product id\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_qty\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eqty\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e                \u003cspan class=\"c1\"\u003e// Quantity scheduled\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_adjust\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eadjust\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e          \u003cspan class=\"c1\"\u003e// Adjustment on site\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_credit\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ecredit\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e          \u003cspan class=\"c1\"\u003e// Returned quantity\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"kd\"\u003eget\u003c/span\u003e \u003cspan class=\"nx\"\u003eproduct\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_product\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eset\u003c/span\u003e \u003cspan class=\"nx\"\u003eproduct\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_product\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eget\u003c/span\u003e \u003cspan class=\"nx\"\u003eqty\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_qty\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eset\u003c/span\u003e \u003cspan class=\"nx\"\u003eqty\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_qty\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eget\u003c/span\u003e \u003cspan class=\"nx\"\u003eadjust\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_adjust\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eset\u003c/span\u003e \u003cspan class=\"nx\"\u003eadjust\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_adjust\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eget\u003c/span\u003e \u003cspan class=\"nx\"\u003ecredit\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_credit\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eset\u003c/span\u003e \u003cspan class=\"nx\"\u003ecredit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_credit\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003e/models/Customer.js\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eexport\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e \u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nx\"\u003eCustomer\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003econstructor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eaddr1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eaddr2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ecity\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003estate\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ezip\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_id\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_name\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_addr1\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eaddr1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_addr2\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eaddr2\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_city\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ecity\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_state\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003estate\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_zip\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ezip\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"kd\"\u003eget\u003c/span\u003e \u003cspan class=\"nx\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_id\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eset\u003c/span\u003e \u003cspan class=\"nx\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_id\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eget\u003c/span\u003e \u003cspan class=\"nx\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_name\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eset\u003c/span\u003e \u003cspan class=\"nx\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_name\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eget\u003c/span\u003e \u003cspan class=\"nx\"\u003eaddr1\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_addr1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eset\u003c/span\u003e \u003cspan class=\"nx\"\u003eaddr1\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_addr1\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eget\u003c/span\u003e \u003cspan class=\"nx\"\u003eaddr2\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_addr2\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eset\u003c/span\u003e \u003cspan class=\"nx\"\u003eaddr2\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_addr2\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eget\u003c/span\u003e \u003cspan class=\"nx\"\u003ecity\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_city\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eset\u003c/span\u003e \u003cspan class=\"nx\"\u003ecity\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_city\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eget\u003c/span\u003e \u003cspan class=\"nx\"\u003estate\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_state\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eset\u003c/span\u003e \u003cspan class=\"nx\"\u003estate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_state\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eget\u003c/span\u003e \u003cspan class=\"nx\"\u003ezip\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_zip\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eset\u003c/span\u003e \u003cspan class=\"nx\"\u003ezip\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_zip\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003e/models/Product.js\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eexport\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e \u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nx\"\u003eProduct\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003econstructor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eshortName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ecost\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_id\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_name\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_shortName\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eshortName\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_price\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_cost\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ecost\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"kd\"\u003eget\u003c/span\u003e \u003cspan class=\"nx\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_id\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eset\u003c/span\u003e \u003cspan class=\"nx\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_id\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eget\u003c/span\u003e \u003cspan class=\"nx\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_name\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eset\u003c/span\u003e \u003cspan class=\"nx\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_name\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eget\u003c/span\u003e \u003cspan class=\"nx\"\u003eshortName\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_shortName\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eset\u003c/span\u003e \u003cspan class=\"nx\"\u003eshortName\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_shortName\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eget\u003c/span\u003e \u003cspan class=\"nx\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_price\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eset\u003c/span\u003e \u003cspan class=\"nx\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_price\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eget\u003c/span\u003e \u003cspan class=\"nx\"\u003ecost\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_cost\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eset\u003c/span\u003e \u003cspan class=\"nx\"\u003ecost\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e_cost\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enewValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"seederの作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#seeder%E3%81%AE%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eSeederの作成\u003c/h1\u003e\n\n\u003cp\u003e　動作テスト用に、テストデータを発生させるシーダーを準備しておきます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003e/models/seeder/Seeder.js\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"nx\"\u003eCustomer\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e../Customer\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"nx\"\u003eInvoice\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e../Invoice\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"nx\"\u003eItem\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e../Item\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"nx\"\u003eProduct\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e../Product\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eexport\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e \u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nx\"\u003eSeeder\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003estatic\u003c/span\u003e \u003cspan class=\"nx\"\u003egetSeed\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"na\"\u003ecustomers\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\n        \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eCustomer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eABC Store\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e123 Abc St.\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eNew York\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eNY\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e10001\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n        \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eCustomer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e123 Deli\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e1 Def Ave.\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eNew York\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eNY\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e10002\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n        \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eCustomer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eXyz mart\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e23 Xyz Blvd.\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eNew York\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eNY\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e10003\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e],\u003c/span\u003e\n      \u003cspan class=\"na\"\u003eproducts\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\n        \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eProduct\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eBlue ribbon\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eB.R.\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mf\"\u003e10.5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mf\"\u003e7.2\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n        \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eProduct\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eRed ribbon\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eR.R.\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mf\"\u003e9.5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mf\"\u003e6.0\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n        \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eProduct\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eWhite shirt\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eW.S.\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mf\"\u003e15.0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mf\"\u003e9.3\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e],\u003c/span\u003e\n      \u003cspan class=\"na\"\u003einvoices\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\n        \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eInvoice\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e1/1/2019\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eItem\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eItem\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eItem\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)]),\u003c/span\u003e\n        \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eInvoice\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e1/1/2019\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eItem\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e7\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)])\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"unstatedをインストール\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#unstated%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eunstatedをインストール\u003c/h1\u003e\n\n\u003cp\u003e　サクッとインストールします。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003enpm install unstated\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"グローバルstateを作る\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%ABstate%E3%82%92%E4%BD%9C%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eグローバルStateを作る\u003c/h1\u003e\n\n\u003cp\u003e　unstatedでグローバルStateを作るには、Provider、Subscribe、Containerの３つを使います。簡単に知るには\u003ca href=\"https://qiita.com/kaba/items/b05f680f850dd46548f3\" id=\"reference-81f83fe4d2e790b8c07f\"\u003eこの記事\u003c/a\u003eあたりがよろしいかと。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"providerでアプリ全体を囲む\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#provider%E3%81%A7%E3%82%A2%E3%83%97%E3%83%AA%E5%85%A8%E4%BD%93%E3%82%92%E5%9B%B2%E3%82%80\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eProviderでアプリ全体を囲む\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"jsx\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eApp.js\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nx\"\u003eProvider\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eunstated\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e...\u003c/span\u003e\n\u003cspan class=\"k\"\u003eexport\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e \u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nx\"\u003eApp\u003c/span\u003e \u003cspan class=\"kd\"\u003eextends\u003c/span\u003e \u003cspan class=\"nx\"\u003eReact\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eComponent\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003erender\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eProvider\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eAppContainer\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nc\"\u003eProvider\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e　これでアプリ全体でSubscribeコンポーネントが使えるようになりました。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"containerを作る\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#container%E3%82%92%E4%BD%9C%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eContainerを作る\u003c/h2\u003e\n\n\u003cp\u003e　Containerは、StateやStateに関連する処理の実体クラスです。Containerを1つ作って、アプリ内で使うグローバルStateを作り、そのStateに対する処理内容(メソッド)を追加します。当然、Containerはいろんなコンポーネントから使うことになるので、ファイル化してimportできるようにしておきましょう。containersフォルダを作って、その下にInvoiceContainerという名前のContainerを作ります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003e/containers/InvoiceContainer.js\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nx\"\u003eContainer\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eunstated\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"nx\"\u003eSeeder\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e../models/seeder/Seeder.js\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eexport\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e \u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nx\"\u003eInvoiceContainer\u003c/span\u003e \u003cspan class=\"kd\"\u003eextends\u003c/span\u003e \u003cspan class=\"nx\"\u003eContainer\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n  \u003cspan class=\"kd\"\u003econstructor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eprops\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{})\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003esuper\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estate\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"na\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003eprops\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003einitialSeeding\u003c/span\u003e \u003cspan class=\"p\"\u003e?\u003c/span\u003e \u003cspan class=\"nx\"\u003eSeeder\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetSeed\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetEmptyData\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n  \u003cspan class=\"nx\"\u003eseed\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003esetState\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e \u003cspan class=\"na\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003eSeeder\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetSeed\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n  \u003cspan class=\"nx\"\u003eclear\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003esetState\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e \u003cspan class=\"na\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetEmptyData\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n  \u003cspan class=\"nx\"\u003egetEmptyData\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"na\"\u003ecustomers\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e[],\u003c/span\u003e\n      \u003cspan class=\"na\"\u003eproducts\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e[],\u003c/span\u003e\n      \u003cspan class=\"na\"\u003einvoices\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e[]\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e　ここでは、\u003ccode\u003edata\u003c/code\u003eという名前のStateだけ登録します。今回はContainerをインスタンス化するときに引数を渡して、シードするかしないか動作を分けることにします。initialSeedingというプロパティとして引数を読んで、trueなら\u003ccode\u003edata\u003c/code\u003eをSeederからとってくる、falseなら\u003ccode\u003edata\u003c/code\u003eを空データにする、とします。このように引数によって初期Stateを変更したい場合は、constructorを使います。\u003cbr\u003e\n　初期化が終わった後、各コンポーネントからシードを実行したりデータをクリアできるように、シード動作をseed()として定義し、クリア動作をclear()として定義しています。\u003c/p\u003e\n\n\u003cp\u003e　コンストラクタでは\u003ccode\u003ethis.state =\u003c/code\u003eのように直接stateを変更していますが、send()やclear()では変更検知をReactが検知できるようにthis.setStateを使っていることに注意してください。\u003c/p\u003e\n\n\u003cp\u003e　さて、これでグローバルStateの準備ができましたので、次は利用側のコードを書いていきます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"containerのインスタンスを先に作っておく\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#container%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%B3%E3%82%B9%E3%82%92%E5%85%88%E3%81%AB%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%8A%E3%81%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eContainerのインスタンスを先に作っておく\u003c/h2\u003e\n\n\u003cp\u003e　これは、初期値指定をしない場合は不要なのです。Containerのインスタンスを先に作っておいて、ProviderにInjectすることによって、SubscribeでContainerを使うときにはすでに「狙ったように」初期化されている状態にできます。そうでなければ、SubscribeでContainerを使うときには「よしなに」初期化される（constructorを使わずに\u003ccode\u003estate =\u003c/code\u003eで初期化することになるのと、もしインスタンスがまだ作られてなかったらインスタンスを作ってくれる）ことになります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"jsx\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eApp.js\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"nx\"\u003eInvoiceContainer\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e./containers/InvoiceContainer\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e...\u003c/span\u003e\n\u003cspan class=\"k\"\u003eexport\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e \u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nx\"\u003eApp\u003c/span\u003e \u003cspan class=\"kd\"\u003eextends\u003c/span\u003e \u003cspan class=\"nx\"\u003eReact\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eComponent\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003erender\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003eglobalState\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eInvoiceContainer\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e \u003cspan class=\"na\"\u003einitialSeeding\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kc\"\u003etrue\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eProvider\u003c/span\u003e \u003cspan class=\"na\"\u003einject=\u003c/span\u003e\u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003eglobalState\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eAppContainer\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nc\"\u003eProvider\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e　呼び出し時に\u003ccode\u003einitialSeeding\u003c/code\u003eにオンを指定してます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"subscribeでグローバルstateにアクセスする\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#subscribe%E3%81%A7%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%ABstate%E3%81%AB%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eSubscribeでグローバルStateにアクセスする\u003c/h2\u003e\n\n\u003cp\u003e　SubscribeをHomeScreenに入れて、HomeScreenでInvoiceリストを表示できるようにします。\u003c/p\u003e\n\n\u003cp\u003e　まずはHomeScreenの出力を単純にSubscribeで囲んでみます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"jsx\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eHomeScreen.js\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"nx\"\u003eReact\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003ereact\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nx\"\u003eButton\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eView\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003ereact-native\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nx\"\u003eSubscribe\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eunstated\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"nx\"\u003estyles\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e../styles.js\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"nx\"\u003eInvoiceContainer\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e../containers/InvoiceContainer\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nx\"\u003eHomeScreen\u003c/span\u003e \u003cspan class=\"kd\"\u003eextends\u003c/span\u003e \u003cspan class=\"nx\"\u003eReact\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eComponent\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003erender\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eSubscribe\u003c/span\u003e \u003cspan class=\"na\"\u003eto=\u003c/span\u003e\u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003eInvoiceContainer\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003eglobalState\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n          \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eView\u003c/span\u003e \u003cspan class=\"na\"\u003estyle=\u003c/span\u003e\u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003estyles\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003econtainer\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003eOpen up App.js to start working on your app!\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nc\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003eHello World!\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nc\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eButton\u003c/span\u003e \u003cspan class=\"na\"\u003etitle=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Go to InvoiceEdit\"\u003c/span\u003e \u003cspan class=\"na\"\u003eonPress=\u003c/span\u003e\u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eprops\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enavigation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enavigate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eInvoiceEdit\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eButton\u003c/span\u003e \u003cspan class=\"na\"\u003etitle=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Go to Summary\"\u003c/span\u003e \u003cspan class=\"na\"\u003eonPress=\u003c/span\u003e\u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eprops\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enavigation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enavigate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eSummary\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u003c/span\u003e\n\n            \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003eglobalState\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estate\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003einvoices\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nx\"\u003edate\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nc\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nc\"\u003eView\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nc\"\u003eSubscribe\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eexport\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e \u003cspan class=\"nx\"\u003eHomeScreen\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e　\u003ccode\u003e\u0026lt;Subscribe to={[InvoiceContainer]}\u0026gt;\u003c/code\u003e のように、InvoiceContainerのインスタンスではなくクラスそのものを指定していることに注目してください。このままだと初期化されなさそうですが、先の\u003ccode\u003e\u0026lt;Provider inject={[globalState]}\u0026gt;\u003c/code\u003eで実態をインジェクトしているので、そのインスタンスが自動的に使われます。自分でpropsリレーをするなどの実体管理をしなくていいので、便利ですね。なお、injectをつかわなくても、実態を必要に応じで「よしなに」初期化してくれます。\u003cbr\u003e\n　ということで、ソースに追加した\u003ccode\u003e\u0026lt;Text\u0026gt;{globalState.state.data.invoices[0].date}\u0026lt;/Text\u0026gt;\u003c/code\u003eのところで、グローバルStateとして登録されている\u003ccode\u003edata\u003c/code\u003eの\u003ccode\u003einvoices\u003c/code\u003e配列の0番の\u003ccode\u003edate\u003c/code\u003eの内容が表示されることを期待しています。\u003c/p\u003e\n\n\u003cp\u003e　実行すると、以下のようにSeederで入れた日付が見られます。\u003cbr\u003e\n\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F315589%2Ff49ff0bb-bfb1-23a2-2ab4-12465a529d97.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=3f218fa58238136a3a3272133b17a30d\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"375\" alt=\"image.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F315589%2Ff49ff0bb-bfb1-23a2-2ab4-12465a529d97.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=3f218fa58238136a3a3272133b17a30d\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/315589/f49ff0bb-bfb1-23a2-2ab4-12465a529d97.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F315589%2Ff49ff0bb-bfb1-23a2-2ab4-12465a529d97.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=34941ccccb3bd36fe6942f2d1766d868 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e　大成功！といいたいところですが、1つ困ったことがあります。InvoiceContainerがSubscribeの外で使えない、もちろんrender()の外でも使えないので、invoicesのリストを作るループをrender()の前にかけないのです。。。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"画面コンポーネントをhoc化する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%94%BB%E9%9D%A2%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%82%92hoc%E5%8C%96%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e画面コンポーネントをHOC化する\u003c/h2\u003e\n\n\u003cp\u003e　HOC化とは、すごく簡単に言うと、機能を追加するためにクラスを上位クラスで包むことです。百聞は一見に如かず、HomeScreenをHOC化します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"jsx\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eHomeScreen.js\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"nx\"\u003eReact\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003ereact\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nx\"\u003eButton\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eView\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003ereact-native\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nx\"\u003eSubscribe\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eunstated\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"nx\"\u003estyles\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e../styles.js\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"nx\"\u003eInvoiceContainer\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e../containers/InvoiceContainer\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nx\"\u003eHomeScreenContent\u003c/span\u003e \u003cspan class=\"kd\"\u003eextends\u003c/span\u003e \u003cspan class=\"nx\"\u003eReact\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eComponent\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003erender\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003eglobalState\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eprops\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eglobalState\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003einvoiceList\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003eNo invoice\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nc\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eglobalState\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estate\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003einvoices\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"nx\"\u003einvoiceList\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eglobalState\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estate\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003einvoices\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003einvoice\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eText\u003c/span\u003e \u003cspan class=\"na\"\u003ekey=\u003c/span\u003e\u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003einvoice\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eid\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003einvoice\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eid\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e : \u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003einvoice\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003edate\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nc\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;;\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eView\u003c/span\u003e \u003cspan class=\"na\"\u003estyle=\u003c/span\u003e\u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003estyles\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003econtainer\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003eOpen up App.js to start working on your app!\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nc\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003eHello World!\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nc\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eButton\u003c/span\u003e \u003cspan class=\"na\"\u003etitle=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Go to InvoiceEdit\"\u003c/span\u003e \u003cspan class=\"na\"\u003eonPress=\u003c/span\u003e\u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eprops\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enavigation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enavigate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eInvoiceEdit\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eButton\u003c/span\u003e \u003cspan class=\"na\"\u003etitle=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Go to Summary\"\u003c/span\u003e \u003cspan class=\"na\"\u003eonPress=\u003c/span\u003e\u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eprops\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enavigation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enavigate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eSummary\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u003c/span\u003e\n\n        \u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003einvoiceList\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nc\"\u003eView\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eHomeScreen\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e({\u003c/span\u003e \u003cspan class=\"nx\"\u003enavigation\u003c/span\u003e \u003cspan class=\"p\"\u003e})\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eSubscribe\u003c/span\u003e \u003cspan class=\"na\"\u003eto=\u003c/span\u003e\u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003eInvoiceContainer\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003eglobalState\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eHomeScreenContent\u003c/span\u003e \u003cspan class=\"na\"\u003eglobalState=\u003c/span\u003e\u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003eglobalState\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e \u003cspan class=\"na\"\u003enavigation=\u003c/span\u003e\u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003enavigation\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nc\"\u003eSubscribe\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eexport\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e \u003cspan class=\"nx\"\u003eHomeScreen\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e　もともとのHomeScreenクラスをHomeScreenContentと改名し、上位クラスをHomeScreenとしました。上位クラスのHomeScreenで、Subscribeの中にHomeScreenContentを内包することで、propsにInvoiceContainerクラスの実体（globalStateという名前にしました）を渡せました。これにより、HomeScreenContentでは通常のthis.propsのメンバーのように、グローバルStateにアクセスできます。一見、「結局propsを手動で渡してる」ように見えますが、完全にこのクラスのファイル内で自己完結しているので、親コンポーネントからpropsを渡すのとは全く異なります。\u003cbr\u003e\n　もうひとつ注意すべき点は、\u003ccode\u003enavigation\u003c/code\u003e プロパティをHomeScreenContentに伝搬してあげることです。こうしないと、HomeScreenContentのほうでreact-navigationを使えません。\u003cbr\u003e\n　あとはいつものReactと同じで、invoiceをループしてinvoiceListにコンテンツを格納し、内に{invoiceList}として表示しています。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F315589%2F0b55489e-7b69-b930-32a6-590c12f289f5.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=131546014ef544236687fbdbcc9bcfaf\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"375\" alt=\"image.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F315589%2F0b55489e-7b69-b930-32a6-590c12f289f5.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=131546014ef544236687fbdbcc9bcfaf\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/315589/0b55489e-7b69-b930-32a6-590c12f289f5.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F315589%2F0b55489e-7b69-b930-32a6-590c12f289f5.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=14e7d7d7271c01d49dfcb3bb6ebbcc4d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"書き込み\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9B%B8%E3%81%8D%E8%BE%BC%E3%81%BF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e書き込み\u003c/h1\u003e\n\n\u003cp\u003e　最後に、グローバルStateに格納されているデータを変更するコードを入れてみましょう。\u003cbr\u003e\n　Summary画面にボタンを追加して、ID2番のInvoiceの日付を修正してみます。Summary画面もHOC化して、ボタンを追加し、ボタンイベント内でグローバルStateを変更してみます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"jsx\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eSummaryScreen.js\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"nx\"\u003eReact\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003ereact\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nx\"\u003eButton\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eView\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003ereact-native\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nx\"\u003eSubscribe\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eunstated\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"nx\"\u003eInvoiceContainer\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e../containers/InvoiceContainer\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"nx\"\u003estyles\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e../styles.js\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nx\"\u003eSummaryScreenContent\u003c/span\u003e \u003cspan class=\"kd\"\u003eextends\u003c/span\u003e \u003cspan class=\"nx\"\u003eReact\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eComponent\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003erender\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eView\u003c/span\u003e \u003cspan class=\"na\"\u003estyle=\u003c/span\u003e\u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003estyles\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003econtainer\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003eSummary Screen\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nc\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eButton\u003c/span\u003e\n          \u003cspan class=\"na\"\u003etitle=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Modify Inv#2\"\u003c/span\u003e\n          \u003cspan class=\"na\"\u003eonPress=\u003c/span\u003e\u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003edata\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eprops\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eglobalState\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estate\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"nx\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003einvoices\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nx\"\u003edate\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e2/2/2020\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eprops\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eglobalState\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003esetState\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e \u003cspan class=\"na\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003edata\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n          \u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e/\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nc\"\u003eView\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eSummaryScreen\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e({\u003c/span\u003e \u003cspan class=\"nx\"\u003enavigation\u003c/span\u003e \u003cspan class=\"p\"\u003e})\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eSubscribe\u003c/span\u003e \u003cspan class=\"na\"\u003eto=\u003c/span\u003e\u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003eInvoiceContainer\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003eglobalState\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eSummaryScreenContent\u003c/span\u003e \u003cspan class=\"na\"\u003eglobalState=\u003c/span\u003e\u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003eglobalState\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e \u003cspan class=\"na\"\u003enavigation=\u003c/span\u003e\u003cspan class=\"si\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003enavigation\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nc\"\u003eSubscribe\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eexport\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e \u003cspan class=\"nx\"\u003eSummaryScreen\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e　\u003ccode\u003ethis.props.globalState.state.data\u003c/code\u003eにデータが入っているのでそれを書き換えます。直接書き換えずに、必ずsetStateしてください。でないと、通常のState変更同様で、画面の内容が書き換わりません。\u003c/p\u003e\n\n\u003cp\u003eでは実行してSummary画面を開けます。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F315589%2Fe38a5ed9-8f64-cfb8-7921-15a56a80e794.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=bfa6b44e90f6da7c29d03db5f7ab289a\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"375\" alt=\"image.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F315589%2Fe38a5ed9-8f64-cfb8-7921-15a56a80e794.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=bfa6b44e90f6da7c29d03db5f7ab289a\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/315589/e38a5ed9-8f64-cfb8-7921-15a56a80e794.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F315589%2Fe38a5ed9-8f64-cfb8-7921-15a56a80e794.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=6e4b14b81e2a8d81bd5c7436d2febe23 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e新しいボタンを押してからBackすると、\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F315589%2F358086f9-d568-dbfc-148f-5b56c6ada76e.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=a8d8904d1cfa1524f762841b788c8cdc\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"375\" alt=\"image.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F315589%2F358086f9-d568-dbfc-148f-5b56c6ada76e.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=a8d8904d1cfa1524f762841b788c8cdc\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/315589/358086f9-d568-dbfc-148f-5b56c6ada76e.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F315589%2F358086f9-d568-dbfc-148f-5b56c6ada76e.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=fccb344fed1d5a53119279867e096c0c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e2行目のInvoiceの日付が変わってます！\u003cbr\u003e\nReactらしい挙動をしてくれましたね。\u003c/p\u003e\n","createdAt":"2019-09-05T23:50:25Z","elapsedYearsFromUpdatedAt":0,"isBanned":false,"isDeprecated":false,"isDestroyableByViewer":false,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isUpdatableByViewer":false,"isSubscribableByViewer":true,"isSubscribedByViewer":false,"isUpdated":false,"likesCount":17,"originalId":1012566,"title":"React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#unstatedredux%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8F\"\u003eunstated。Reduxではなく。\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%8D%E3%83%83%E3%83%88%E3%81%8C%E3%81%A4%E3%81%AA%E3%81%8C%E3%82%89%E3%81%AA%E3%81%84%E3%81%93%E3%81%A8%E3%82%92%E6%83%B3%E5%AE%9A\"\u003eネットがつながらないことを想定\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%87%E3%83%BC%E3%82%BFmodel%E3%81%AE%E4%BD%9C%E6%88%90\"\u003eデータModelの作成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#seeder%E3%81%AE%E4%BD%9C%E6%88%90\"\u003eSeederの作成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#unstated%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"\u003eunstatedをインストール\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%ABstate%E3%82%92%E4%BD%9C%E3%82%8B\"\u003eグローバルStateを作る\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#provider%E3%81%A7%E3%82%A2%E3%83%97%E3%83%AA%E5%85%A8%E4%BD%93%E3%82%92%E5%9B%B2%E3%82%80\"\u003eProviderでアプリ全体を囲む\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#container%E3%82%92%E4%BD%9C%E3%82%8B\"\u003eContainerを作る\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#container%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%B3%E3%82%B9%E3%82%92%E5%85%88%E3%81%AB%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%8A%E3%81%8F\"\u003eContainerのインスタンスを先に作っておく\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#subscribe%E3%81%A7%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%ABstate%E3%81%AB%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%99%E3%82%8B\"\u003eSubscribeでグローバルStateにアクセスする\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%94%BB%E9%9D%A2%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%82%92hoc%E5%8C%96%E3%81%99%E3%82%8B\"\u003e画面コンポーネントをHOC化する\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%9B%B8%E3%81%8D%E8%BE%BC%E3%81%BF\"\u003e書き込み\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":2600,"updatedAt":"2019-09-05T23:50:25Z","uuid":"36dcc678976bd4ebe006","banReason":null,"adventCalendarItem":null,"author":{"originalId":315589,"description":"お仕事や協力開発、越境相談など大歓迎。\r\n松下電器産業株式会社（現パナソニック）でレッツノートを設計、ホイールパッドなどを発明。2007年ニューヨークにて独立し、主に在米日系企業のシステム開発を請け負うかたわら、暇を見つけては新技術に触れてニタニタしています。","name":"藤崎 仁美","profileImageUrl":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Favatars2.githubusercontent.com%2Fu%2F12057602%3Fv%3D4?ixlib=rb-1.2.2\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=97f7f0ba0058b0cba9b4f7628e8a26ed","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Favatars2.githubusercontent.com%2Fu%2F12057602%3Fv%3D4?ixlib=rb-1.2.2\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=97f7f0ba0058b0cba9b4f7628e8a26ed","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Favatars2.githubusercontent.com%2Fu%2F12057602%3Fv%3D4?ixlib=rb-1.2.2\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=2efb61618a8bab47536cd96a88c93f92","urlName":"hitotch","isBlockingViewer":false,"isFollowedByViewer":false,"isFollowableByViewer":true,"websiteUrl":"","organizations":{"edges":[]}},"tags":[{"name":"JavaScript","urlName":"javascript"},{"name":"React","urlName":"react"},{"name":"reactnative","urlName":"reactnative"},{"name":"react-native","urlName":"react-native"},{"name":"expo","urlName":"expo"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"viewer":{"isGithubLoginEnabled":true,"contribution":4,"numberOfDaysSinceRegistration":204,"organizations":{"edges":[]},"followers":{"totalCount":1},"articles":{"totalCount":4},"tags":{"edges":[{"node":{"name":"Python"}}]},"postingArticleTags":{"edges":[{"node":{"name":"Python"}},{"node":{"name":"Windows"}},{"node":{"name":"Chrome"}},{"node":{"name":"CSV"}},{"node":{"name":"アルゴリズム"}},{"node":{"name":"AtCoder"}},{"node":{"name":"Python3"}},{"node":{"name":"プログラミングコンテスト"}},{"node":{"name":"Git"}},{"node":{"name":"GitHub"}}]}},"analyticsTrackingId":"UA-128938873-1"}</script>
      
<script src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/td_qt_access.js.download" type="text/javascript"></script><script>microadTd.QT.start({"article_category": "JavaScript,React,reactnative,react-native,expo"})</script><script>(function(d,u){var b=d.getElementsByTagName("script")[0],j=d.createElement("script");j.async=true;j.src=u;b.parentNode.insertBefore(j,b);})(document,"//img.ak.impact-ad.jp/ut/ff9a3577423c8ed5_4330.js");</script><noscript><iframe frameborder="0" height="0" src="//nspt.unitag.jp/ff9a3577423c8ed5_4330.php" width="0"></iframe></noscript><script async="" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/js(3)"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'AW-878053044');</script><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1792588824374455');
fbq('track', 'PageView');</script><noscript><img height="1" src="https://www.facebook.com/tr?id=1792588824374455&amp;ev=PageView&amp;noscript=1" style="display:none" width="1" /></noscript><footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewBox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://qiita.com/about">About</a><a href="https://qiita.com/terms">利用規約</a><a href="https://qiita.com/privacy">プライバシー</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">ガイドライン</a><a href="https://qiita.com/release-notes">リリース</a></div><div class="st-Footer_column"><a href="https://qiita.com/api/v2/docs">API</a><a href="https://qiita.com/feedback/new">ご意見</a><a href="https://help.qiita.com/">ヘルプ</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">広告掲載</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com/">ブログ</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2020 Increments Inc.</div></footer><div id="Snackbar-react-component-197e4b68-be78-4c59-a5a0-e2a89a3568c0"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-197e4b68-be78-4c59-a5a0-e2a89a3568c0">{}</script>
      
<div id="LoginModal-react-component-205c52c1-f322-4124-9a8b-cc878291b9e1"><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body lm-Dialog"><div class="fa fa-times lm-Dialog_close"></div><div class="lm-Dialog_title">ユーザー登録して、Qiitaをもっと便利に使ってみませんか。</div><div class="lm-Dialog_message-pc">この機能を利用するにはログインする必要があります。ログインするとさらに便利にQiitaを利用できます。</div><div class="lm-Dialog_message-mobile">この機能を利用するにはログインする必要があります。ログインするとさらに便利にQiitaを利用できます。</div><ol class="lm-Dialog_list"><li>あなたにマッチした記事をお届けします<div class="description">ユーザーやタグをフォローすることで、あなたが興味を持つ技術分野の情報をまとめてキャッチアップできます</div></li><li>便利な情報をあとで効率的に読み返せます<div class="description">気に入った記事を「ストック」することで、あとからすぐに検索できます</div></li></ol><a href="https://qiita.com/signup?callback_action=login_or_signup&amp;redirect_to=%2Fhitotch%2Fitems%2F36dcc678976bd4ebe006&amp;realm=qiita" class="lm-Dialog_button lm-Dialog_button-signup">登録する</a><a href="https://qiita.com/login?callback_action=login_or_signup&amp;redirect_to=%2Fhitotch%2Fitems%2F36dcc678976bd4ebe006&amp;realm=qiita" class="lm-Dialog_button lm-Dialog_button-signin">ログインする</a></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-205c52c1-f322-4124-9a8b-cc878291b9e1">{}</script>
      
<div id="UserHoverCard-react-component-bb834699-f490-4e51-a707-5bfaa75c4851"><div class="uh-Container" style="left:0px;top:0px"><div>ユーザーは見つかりませんでした</div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="UserHoverCard" data-dom-id="UserHoverCard-react-component-bb834699-f490-4e51-a707-5bfaa75c4851">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;SoOpTnu+twP1mpYs3Cvg3CCmdb06gQIbwRioVgVTfzVouqK13jgt8wXVcU6Cobea+41qHa3J3ktD0FBqDPoDwA==&quot;,&quot;locale&quot;:&quot;ja&quot;},&quot;currentUser&quot;:{&quot;isStaff&quot;:false,&quot;isJobseeker&quot;:false,&quot;isBetaReleaseEnabled&quot;:false,&quot;isEarlyAdapter&quot;:false,&quot;name&quot;:&quot;&quot;,&quot;originalId&quot;:559163,&quot;profileImageUrl&quot;:&quot;https://qiita-user-profile-images.imgix.net/https%3A%2F%2Favatars3.githubusercontent.com%2Fu%2F55423883%3Fv%3D4?ixlib=rb-1.2.2\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=9a27f9a0f42b0037c362c3058e093823&quot;,&quot;urlName&quot;:&quot;YUMA-NAGAO&quot;,&quot;remainingPublicImageUploadableSizeInCurrentMonth&quot;:104857600,&quot;monthlyPublicImageUploadableSizeLimit&quot;:104857600}}"><script type="application/json" data-js-react-on-rails-store="AppStore">{"snackbar":{"type":"","body":"","isActive":false}}</script></div><ul class="dropdown-menu textcomplete-dropdown" style="display: none; position: absolute; z-index: 10000;"></ul><script>var getPageTitle = document.title;
var url = location.href ;

var TitleURL = getPageTitle+"/n"+url;</script><script>// テキストを選択する
TitleURL.select();
// 選択しているテキストをクリップボードにコピーする
document.exeCommand("Copy");
</script><script>DOCUMENT.ADDEVENTLISTENER('COPY', FUNCTION(E){
  /** 元のコピーテキストを取得 */
  VAR COPIED = WINDOW.GETSELECTION().TOSTRING();
  /** コピーテキストを書き換え */
  E.CLIPBOARDDATA.SETDATA('TEXT/PLAIN', COPIED.TOUPPERCASE());
  /** 元のイベントが起こるのをキャンセル */
  E.PREVENTDEFAULT();
});</script><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==" width="1" height="1" border="0" class="bigmining_dmp_beacon" style="display: none;"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==" width="1" height="1" border="0" class="bigmining_dmp_beacon" style="display: none;"><img src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/adsct" width="1" height="1" border="0" class="bigmining_dmp_beacon" style="display: none;"><iframe height="0" width="0" style="display: none; visibility: hidden;" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/activityi.html"></iframe><iframe height="0" width="0" style="display: none; visibility: hidden;" src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/activityi(1).html"></iframe><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-58Z82M');</script><div style="display: none; visibility: hidden;"><iframe src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/activityi(2).html" width="1" height="1" frameborder="0" style="display:none"></iframe></div><div style="display: none; visibility: hidden;"><iframe src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/activityi(3).html" width="1" height="1" frameborder="0" style="display:none"></iframe></div><div style="display: none; visibility: hidden;">
<script src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/oct.js.download" type="text/javascript"></script></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><div style="display: none; visibility: hidden;"></div><iframe src="./React Native + Expo + unstated (+ react-navigation)で、簡単グローバルState管理＋ローカルデータ管理を実現する - Qiita_files/pixel.html" style="display: none;"></iframe></body></html>